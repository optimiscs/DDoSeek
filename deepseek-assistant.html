<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDosSeek - DeepSeek AI助手</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 50%, #f7fafc 100%);
            color: #2d3748;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* 毛玻璃效果基础样式 */
        .glass-effect {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .glass-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(24, 144, 255, 0.6);
        }

        .top-navbar {
            height: 64px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            color: #1890ff;
        }

        .logo i {
            margin-right: 12px;
            font-size: 24px;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 16px;
            color: #4a5568;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1890ff, #52c41a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* 左侧边栏 - 统一样式 */
        .sidebar {
            position: fixed;
            left: 0;
            top: 64px;
            bottom: 0;
            width: 240px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
            padding: 24px 0;
            z-index: 999;
            transition: all 0.3s ease;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
        }

        .sidebar-menu {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .sidebar-menu li {
            margin: 4px 16px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            color: #4a5568;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .sidebar-menu a:hover, .sidebar-menu a.active {
            background: rgba(24, 144, 255, 0.1);
            color: #1890ff;
            transform: translateX(2px);
        }

        .sidebar-menu i {
            width: 20px;
            margin-right: 12px;
            font-size: 16px;
            text-align: center;
        }

        .main-content {
            margin-left: 240px;
            margin-top: 64px;
            padding: 24px;
            min-height: calc(100vh - 64px);
        }

        .page-header {
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .ai-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: rgba(56, 161, 105, 0.2);
            color: #38a169;
            position: relative;
            overflow: hidden;
        }

        .ai-status::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: statusSweep 2s infinite;
        }

        @keyframes statusSweep {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .action-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }

        .action-btn:hover::before {
            left: 100%;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .btn-primary { background: linear-gradient(135deg, #3182ce, #2c5282); color: white; }
        .btn-success { background: linear-gradient(135deg, #38a169, #2f855a); color: white; }
        .btn-warning { background: linear-gradient(135deg, #d69e2e, #b7791f); color: white; }
        .btn-danger { background: linear-gradient(135deg, #e53e3e, #c53030); color: white; }

        .ai-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            height: calc(100vh - 140px);
        }

        .chat-section {
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        .chat-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .chat-header {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: between;
            gap: 12px;
            background: rgba(255, 255, 255, 0.9);
        }

        .ai-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }

        .ai-avatar::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: avatarShine 3s infinite;
        }

        @keyframes avatarShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
            100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        }

        .chat-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
        }

        .chat-status {
            margin-left: auto;
            font-size: 12px;
            color: #38a169;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #38a169;
            box-shadow: 0 0 10px rgba(56, 161, 105, 0.5);
        }

        .chat-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.02);
            position: relative;
        }

        .chat-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="%23f7fafc" fill-opacity="0.4"><circle cx="3" cy="3" r="1"/></g></svg>') repeat;
            opacity: 0.5;
            pointer-events: none;
        }

        .message {
            margin-bottom: 16px;
            display: flex;
            gap: 12px;
            animation: messageSlideIn 0.4s ease;
            position: relative;
            z-index: 1;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        @keyframes messageSlideIn {
            from { 
                transform: translateY(20px) scale(0.95); 
                opacity: 0; 
            }
            to { 
                transform: translateY(0) scale(1); 
                opacity: 1; 
            }
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: 2px solid rgba(102, 126, 234, 0.3);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #1890ff, #52c41a);
            color: white;
            border: 2px solid rgba(24, 144, 255, 0.3);
        }

        .message-avatar::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: avatarBorder 2s linear infinite;
        }

        @keyframes avatarBorder {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.5;
            position: relative;
            transition: all 0.3s ease;
        }

        .message-content:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .message.ai .message-content {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border-radius: 16px 16px 16px 4px;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #3182ce, #2c5282);
            color: white;
            border-radius: 16px 16px 4px 16px;
        }

        .message-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: inherit;
            background: linear-gradient(135deg, transparent, rgba(255,255,255,0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .message-content:hover::before {
            opacity: 1;
        }

        .message-time {
            font-size: 11px;
            color: #718096;
            margin-top: 4px;
            opacity: 0.8;
        }

        .message.user .message-time {
            color: rgba(255, 255, 255, 0.7);
        }

        .chat-input-area {
            padding: 16px 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .quick-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .quick-btn {
            padding: 6px 12px;
            background: rgba(49, 130, 206, 0.1);
            color: #3182ce;
            border: 1px solid rgba(49, 130, 206, 0.2);
            border-radius: 16px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .quick-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(49, 130, 206, 0.2), transparent);
            transition: left 0.3s ease;
        }

        .quick-btn:hover {
            background: linear-gradient(135deg, #3182ce, #2c5282);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.3);
        }

        .quick-btn:hover::before {
            left: 100%;
        }

        .input-row {
            display: flex;
            gap: 8px;
            align-items: end;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            font-size: 14px;
            background: white;
            resize: none;
            max-height: 80px;
            min-height: 44px;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .chat-input:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }

        .send-btn {
            width: 44px;
            height: 44px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #3182ce, #2c5282);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .send-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 16px rgba(49, 130, 206, 0.4);
        }

        .send-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        /* 侧边面板优化 */
        .side-panels {
            display: flex;
            flex-direction: column;
            gap: 16px;
            height: 100%;
        }

        .panel {
            padding: 16px;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            flex: 1;
            min-height: 0;
        }

        .panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(24, 144, 255, 0.6);
        }

        .panel:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
        }

        .panel-title {
            font-size: 14px;
            font-weight: 600;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-content {
            flex: 1;
            overflow-y: auto;
            min-height: 0;
        }

        /* 面板切换控制 */
        .panel-switcher {
            display: flex;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            padding: 2px;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
        }

        .panel-switcher::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: calc(50% - 2px);
            height: calc(100% - 4px);
            background: white;
            border-radius: 6px;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 1;
        }

        .panel-switcher.insights-active::before {
            transform: translateX(100%);
        }

        .switch-btn {
            flex: 1;
            padding: 8px 12px;
            background: transparent;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .switch-btn.active {
            color: #3182ce;
        }

        .switch-btn:not(.active) {
            color: #718096;
        }

        .switch-btn:hover {
            color: #2c5282;
        }

        /* 面板内容区域 */
        .panel-content-area {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .content-view {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow-y: auto;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.4s ease;
            pointer-events: none;
        }

        .content-view.active {
            opacity: 1;
            transform: translateX(0);
            pointer-events: auto;
        }

        /* 统计卡片网格 */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }

        .stat-card {
            padding: 12px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(24, 144, 255, 0.6);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 2px;
        }

        .stat-label {
            font-size: 10px;
            color: #718096;
        }

        /* 知识库面板特殊样式 */
        .knowledge-panel {
            max-height: calc(100vh - 200px);
        }

        .knowledge-panel .panel-content {
            max-height: calc(100vh - 280px);
        }

        /* 响应式优化 */
        @media (max-width: 1400px) {
            .ai-layout {
                grid-template-columns: 1fr;
                gap: 16px;
                height: auto;
            }
            
            .side-panels {
                grid-template-columns: repeat(2, 1fr);
                flex-direction: row;
                height: auto;
                min-height: 400px;
            }

            .panel {
                min-height: 400px;
            }

            .knowledge-panel {
                max-height: 400px;
            }

            .knowledge-panel .panel-content {
                max-height: 320px;
            }
        }

        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 6px;
            }

            .stat-card {
                padding: 8px 6px;
            }

            .stat-value {
                font-size: 14px;
            }

            .stat-label {
                font-size: 9px;
            }
        }

        /* 响应式设计 - 统一标准 */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .main-content {
                margin-left: 0;
                transition: margin-left 0.3s ease;
            }
            
            .side-panels {
                grid-template-columns: 1fr;
                flex-direction: column;
                height: auto;
            }

            .panel {
                min-height: 300px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .knowledge-panel {
                max-height: 300px;
            }

            .knowledge-panel .panel-content {
                max-height: 220px;
            }
        }

        @media (max-width: 480px) {
            .switch-btn {
                font-size: 10px;
                padding: 6px 8px;
            }

            .panel {
                padding: 12px;
                min-height: 250px;
            }

            .stats-grid {
                gap: 4px;
            }

            .stat-card {
                padding: 6px 4px;
            }

            .stat-value {
                font-size: 12px;
            }

            .stat-label {
                font-size: 8px;
            }
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }



        @keyframes typingBounce {
            0%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-8px); }
        }

        /* 威胁项目样式 */
        .threat-item {
            padding: 12px;
            margin-bottom: 12px;
            background: rgba(255, 255, 255, 0.9);
            border-left: 4px solid transparent;
            border-radius: 8px;
            font-size: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .threat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .threat-item:hover::before {
            transform: translateX(100%);
        }

        .threat-item:hover {
            transform: translateX(6px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 1);
        }

        .threat-item.high-risk {
            border-left-color: #e53e3e;
            background: rgba(229, 62, 62, 0.05);
        }

        .threat-item.medium-risk {
            border-left-color: #d69e2e;
            background: rgba(214, 158, 46, 0.05);
        }

        .threat-item.low-risk {
            border-left-color: #38a169;
            background: rgba(56, 161, 105, 0.05);
        }

        .threat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 6px;
        }

        .threat-title {
            font-weight: 600;
            margin-bottom: 2px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .threat-title.high-risk { color: #e53e3e; }
        .threat-title.medium-risk { color: #d69e2e; }
        .threat-title.low-risk { color: #38a169; }

        .threat-badge {
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .threat-badge.high { background: rgba(229, 62, 62, 0.2); color: #e53e3e; }
        .threat-badge.medium { background: rgba(214, 158, 46, 0.2); color: #d69e2e; }
        .threat-badge.low { background: rgba(56, 161, 105, 0.2); color: #38a169; }

        .threat-desc {
            color: #718096;
            line-height: 1.4;
            margin-bottom: 6px;
        }

        .threat-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 10px;
            color: #a0aec0;
        }

        .threat-severity {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .severity-bar {
            width: 30px;
            height: 3px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .severity-fill {
            height: 100%;
            border-radius: 2px;

        }

        .severity-fill.high { background: linear-gradient(90deg, #e53e3e, #f56565); width: 90%; }
        .severity-fill.medium { background: linear-gradient(90deg, #d69e2e, #f6ad55); width: 60%; }
        .severity-fill.low { background: linear-gradient(90deg, #38a169, #68d391); width: 30%; }



        /* AI洞察项目样式 */
        .insight-item {
            padding: 12px;
            margin-bottom: 12px;
            background: rgba(255, 255, 255, 0.9);
            border-left: 4px solid #3182ce;
            border-radius: 8px;
            font-size: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .insight-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .insight-item:hover::before {
            transform: translateX(100%);
        }

        .insight-item:hover {
            transform: translateX(6px);
            box-shadow: 0 4px 16px rgba(49, 130, 206, 0.2);
        }

        .insight-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 6px;
        }

        .insight-title {
            font-weight: 600;
            color: #3182ce;
            margin-bottom: 2px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .insight-confidence {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 10px;
            color: #718096;
        }

        .confidence-bar {
            width: 30px;
            height: 3px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #38a169, #68d391);
            border-radius: 2px;
        }

        .insight-desc {
            color: #718096;
            line-height: 1.4;
        }

        /* 知识库项目样式 */
        .knowledge-search {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            font-size: 12px;
            margin-bottom: 12px;
            background: white;
            transition: all 0.3s ease;
        }

        .knowledge-search:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 2px rgba(49, 130, 206, 0.1);
        }

        .knowledge-item {
            padding: 10px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .knowledge-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .knowledge-item:hover::before {
            transform: translateX(100%);
        }

        .knowledge-item:hover {
            background: rgba(49, 130, 206, 0.05);
            border-color: #3182ce;
            transform: translateX(4px);
            box-shadow: 0 2px 8px rgba(49, 130, 206, 0.15);
        }

        .knowledge-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .knowledge-desc {
            color: #718096;
            font-size: 10px;
            margin-bottom: 6px;
            line-height: 1.3;
        }

        .knowledge-tags {
            display: flex;
            gap: 4px;
            margin-top: 6px;
            flex-wrap: wrap;
        }

        .knowledge-tag {
            padding: 2px 6px;
            background: rgba(49, 130, 206, 0.1);
            color: #3182ce;
            border-radius: 8px;
            font-size: 9px;
            border: 1px solid rgba(49, 130, 206, 0.2);
            transition: all 0.3s ease;
        }

        .knowledge-tag:hover {
            background: #3182ce;
            color: white;
        }

        /* 其他消息样式 */
        .typing-indicator {
            display: none;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 16px 16px 16px 4px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            position: relative;
            z-index: 1;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #718096;
            animation: typingBounce 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        /* 消息特殊样式 */
        .message-code {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 8px;
            margin: 8px 0;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            font-size: 12px;
            color: #2d3748;
        }

        .message-table {
            margin: 8px 0;
            border-collapse: collapse;
            width: 100%;
            font-size: 12px;
        }

        .message-table th,
        .message-table td {
            padding: 6px 8px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            text-align: left;
        }

        .message-table th {
            background: rgba(0, 0, 0, 0.05);
            font-weight: 600;
        }

        .message-chart {
            margin: 12px 0;
            height: 120px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            font-size: 12px;
        }

        /* 知识库面板特殊样式 */
    </style>
</head>
<body>
    <nav class="top-navbar">
        <div class="logo">
            <i class="fas fa-shield-alt"></i>
            DDosSeek
        </div>
        <div class="user-section">
            <i class="fas fa-bell" style="cursor: pointer; color: #faad14;"></i>
            <div class="user-avatar">A</div>
            <span>管理员</span>
        </div>
    </nav>

    <aside class="sidebar">
        <ul class="sidebar-menu">
            <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i>系统仪表盘</a></li>
            <li><a href="network-monitor.html"><i class="fas fa-network-wired"></i>网络监测中心</a></li>
            <li><a href="ddos-detection.html"><i class="fas fa-shield-virus"></i>DDoS检测防护</a></li>
            <li><a href="firewall-management.html"><i class="fas fa-fire-extinguisher"></i>防火墙管理</a></li>
            <li><a href="log-center.html"><i class="fas fa-file-alt"></i>智能日志中心</a></li>
            <li><a href="deepseek-assistant.html" class="active"><i class="fas fa-robot"></i>DeepSeek AI助手</a></li>
            <li><a href="rule-config.html"><i class="fas fa-cogs"></i>规则配置中心</a></li>
            <li><a href="system-test.html"><i class="fas fa-vial"></i>系统测试平台</a></li>
        </ul>
    </aside>

    <main class="main-content">
        <!-- 面包屑导航 -->
        <nav class="breadcrumb" style="margin-bottom: 16px; font-size: 12px; color: #718096;">
            <span><i class="fas fa-home"></i> 首页</span>
            <span style="margin: 0 8px;">/</span>
            <span><a href="dashboard.html" style="color: #718096; text-decoration: none;">系统仪表盘</a></span>
            <span style="margin: 0 8px;">/</span>
            <span style="color: #3182ce; font-weight: 500;">DeepSeek AI助手</span>
        </nav>

        <div class="page-header">
            <div class="page-title">
                <i class="fas fa-robot"></i>
                DeepSeek AI助手
                <div class="ai-status">智能在线</div>
            </div>
            <div class="action-controls">
                <button class="action-btn btn-primary">
                    <i class="fas fa-brain"></i> 深度分析
                </button>
                <button class="action-btn btn-success">
                    <i class="fas fa-magic"></i> 自动诊断
                </button>
                <button class="action-btn btn-warning">
                    <i class="fas fa-cog"></i> 模型配置
                </button>
            </div>
        </div>

        <div class="ai-layout">
            <div class="chat-section glass-effect">
                <div class="chat-header">
                    <div class="ai-avatar">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="chat-title">DeepSeek 智能助手</div>
                    <div class="chat-status">
                        <div class="status-dot"></div>
                        在线服务 · 响应时间 <strong>0.8s</strong>
                    </div>
                </div>

                <div class="chat-container" id="chatContainer">
                    <div class="message ai">
                        <div class="message-avatar">AI</div>
                        <div class="message-content">
                            <div>您好！我是DDosSeek的AI智能助手，基于DeepSeek技术打造。我可以帮助您：</div>
                            <br>
                            <div>🛡️ <strong>威胁分析</strong> - 实时分析DDoS攻击模式与行为特征</div>
                            <div>🔍 <strong>智能诊断</strong> - 快速定位网络安全问题根源</div>
                            <div>📊 <strong>性能优化</strong> - 提供系统优化建议与配置调整</div>
                            <div>🧠 <strong>知识问答</strong> - 解答网络安全相关技术问题</div>
                            <div>⚡ <strong>预测分析</strong> - 基于机器学习预测攻击趋势</div>
                            <div>🎯 <strong>策略建议</strong> - 制定个性化防护策略方案</div>
                            <br>
                            <div style="background: rgba(49, 130, 206, 0.1); padding: 8px; border-radius: 6px; font-size: 12px;">
                                💡 <strong>提示：</strong>您可以直接描述遇到的问题，我会结合实时监控数据为您提供精准分析
                            </div>
                            <div class="message-time">14:35:22</div>
                        </div>
                    </div>

                    <div class="message user">
                        <div class="message-avatar">U</div>
                        <div class="message-content">
                            <div>最近系统检测到一些异常流量，能帮我分析一下原因吗？这些攻击似乎有组织性，来源比较分散。</div>
                            <div class="message-time">14:36:15</div>
                        </div>
                    </div>

                    <div class="message ai">
                        <div class="message-avatar">AI</div>
                        <div class="message-content">
                            <div>我已经深度分析了您的网络流量数据，检测到典型的分布式攻击模式：</div>
                            <br>
                            <div>🚨 <strong>攻击特征分析：</strong></div>
                            <div class="message-table">
                                <table>
                                    <tr><th>攻击源</th><th>类型</th><th>强度</th><th>威胁等级</th></tr>
                                    <tr><td>103.45.67.89</td><td>HTTP Flood</td><td>500 req/s</td><td style="color:#e53e3e;">高危</td></tr>
                                    <tr><td>198.51.100.*</td><td>SYN Flood</td><td>350K pps</td><td style="color:#e53e3e;">高危</td></tr>
                                    <tr><td>172.16.0.0/16</td><td>UDP Amplification</td><td>280K pps</td><td style="color:#d69e2e;">中危</td></tr>
                                </table>
                            </div>
                            <div>📊 <strong>模式识别结果：</strong></div>
                            <div style="background: rgba(229, 62, 62, 0.1); padding: 8px; border-radius: 6px; margin: 8px 0;">
                                • <strong>协调性攻击：</strong>15个IP段同时发起攻击，时间间隔<2秒<br>
                                • <strong>地理分布：</strong>覆盖8个国家，主要集中在美国(35%)、俄罗斯(28%)<br>
                                • <strong>攻击手法：</strong>多协议混合攻击，绕过单一防护策略
                            </div>
                            <div>💡 <strong>AI智能建议：</strong></div>
                            <div>1. <strong>立即措施：</strong>启用地理IP过滤，阻断高风险地区流量</div>
                            <div>2. <strong>策略调整：</strong>将连接阈值调整为100conn/s，启用渐进式限流</div>
                            <div>3. <strong>深度防护：</strong>激活DPI深度包检测，识别伪造流量特征</div>
                            <div>4. <strong>预警机制：</strong>设置多源攻击告警，响应时间缩短至5秒内</div>
                            <div class="message-time">14:36:45</div>
                        </div>
                    </div>

                    <div class="message user">
                        <div class="message-avatar">U</div>
                        <div class="message-content">
                            <div>能生成一个详细的安全报告吗？需要包含最近24小时的数据分析</div>
                            <div class="message-time">14:37:20</div>
                        </div>
                    </div>

                    <div class="message ai">
                        <div class="message-avatar">AI</div>
                        <div class="message-content">
                            <div>正在生成详细安全分析报告...</div>
                            <br>
                            <div>📋 <strong>DDosSeek 24小时安全态势报告</strong></div>
                            <div style="background: rgba(0, 0, 0, 0.05); padding: 12px; border-radius: 8px; margin: 8px 0; font-family: monospace; font-size: 12px;">
                                ==========================================<br>
                                报告生成时间: 2024-01-15 14:37:25<br>
                                分析时间段: 2024-01-14 14:37 - 2024-01-15 14:37<br>
                                ==========================================
                            </div>
                            <div>📊 <strong>威胁统计概览：</strong></div>
                            <div class="message-table">
                                <table>
                                    <tr><th>指标</th><th>24小时</th><th>变化趋势</th><th>状态</th></tr>
                                    <tr><td>总攻击次数</td><td>1,247</td><td style="color:#e53e3e;">↑12%</td><td style="color:#d69e2e;">偏高</td></tr>
                                    <tr><td>拦截成功率</td><td>99.2%</td><td style="color:#38a169;">↑0.2%</td><td style="color:#38a169;">优秀</td></tr>
                                    <tr><td>误报数量</td><td>3</td><td style="color:#38a169;">↓67%</td><td style="color:#38a169;">良好</td></tr>
                                    <tr><td>平均响应时间</td><td>0.8s</td><td style="color:#38a169;">↓15%</td><td style="color:#38a169;">优秀</td></tr>
                                </table>
                            </div>
                            <div>🎯 <strong>AI预测分析：</strong></div>
                            <div style="background: rgba(49, 130, 206, 0.1); padding: 8px; border-radius: 6px; margin: 8px 0;">
                                • <strong>攻击趋势：</strong>预计未来6小时攻击强度将增加35%<br>
                                • <strong>高风险时段：</strong>16:00-18:00 (GMT+8)<br>
                                • <strong>建议准备：</strong>提前启用高级防护模式
                            </div>
                            <div class="message-time">14:37:55</div>
                        </div>
                    </div>

                    <div class="typing-indicator" id="typingIndicator">
                        <div class="ai-avatar">AI</div>
                        <div style="font-size: 12px; color: #718096;">AI正在深度分析...</div>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>

                <div class="chat-input-area">
                    <div class="quick-actions">
                        <div class="quick-btn" onclick="sendQuickMessage('分析当前威胁态势')">🔍 分析威胁态势</div>
                        <div class="quick-btn" onclick="sendQuickMessage('检查系统性能状况')">⚡ 系统性能检查</div>
                        <div class="quick-btn" onclick="sendQuickMessage('优化防护策略配置')">🛡️ 优化防护策略</div>
                        <div class="quick-btn" onclick="sendQuickMessage('生成详细安全报告')">📊 生成安全报告</div>
                        <div class="quick-btn" onclick="sendQuickMessage('预测攻击趋势')">🎯 预测攻击趋势</div>
                        <div class="quick-btn" onclick="sendQuickMessage('推荐应急响应方案')">🚨 应急响应方案</div>
                    </div>
                    <div class="input-row">
                        <textarea class="chat-input" id="chatInput" placeholder="输入您的问题，AI助手将为您提供专业建议（支持自然语言描述问题、上传日志文件、请求策略建议等）..." rows="1"></textarea>
                        <button class="send-btn" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="side-panels">
                <!-- 第一个面板：威胁监控 & AI洞察 -->
                <div class="panel glass-effect">
                    <div class="panel-header">
                        <div class="panel-title">
                            <i class="fas fa-shield-virus" style="color: #e53e3e;"></i>
                            安全态势中心
                        </div>
                        <div style="font-size: 10px; color: #718096;">实时更新</div>
                    </div>
                    
                    <!-- 切换控制器 -->
                    <div class="panel-switcher" id="panelSwitcher">
                        <button class="switch-btn active" data-view="threats">
                            <i class="fas fa-shield-virus"></i>
                            威胁监控
                        </button>
                        <button class="switch-btn" data-view="insights">
                            <i class="fas fa-brain"></i>
                            AI洞察
                        </button>
                    </div>

                    <div class="panel-content-area">
                        <!-- 威胁监控视图 -->
                        <div class="content-view active" id="threatsView">
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value" style="color: #e53e3e;">7</div>
                                    <div class="stat-label">活跃威胁</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" style="color: #d69e2e;">23</div>
                                    <div class="stat-label">待处理</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" style="color: #3182ce;">156</div>
                                    <div class="stat-label">已拦截</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" style="color: #38a169;">99.2%</div>
                                    <div class="stat-label">成功率</div>
                                </div>
                            </div>
                            
                            <div class="threat-items-container">
                                <div class="threat-item high-risk">
                                    <div class="threat-header">
                                        <div class="threat-title high-risk">
                                            <i class="fas fa-exclamation-triangle"></i>
                                            高风险 - DDoS协同攻击
                                        </div>
                                        <span class="threat-badge high">严重</span>
                                    </div>
                                    <div class="threat-desc">检测到来自 103.45.67.* 网段的大规模HTTP Flood攻击，涉及15个IP地址协同作战</div>
                                    <div class="threat-meta">
                                        <div class="threat-severity">
                                            <span>威胁等级</span>
                                            <div class="severity-bar">
                                                <div class="severity-fill high"></div>
                                            </div>
                                        </div>
                                        <span>2分钟前</span>
                                    </div>
                                </div>
                                
                                <div class="threat-item medium-risk">
                                    <div class="threat-header">
                                        <div class="threat-title medium-risk">
                                            <i class="fas fa-search"></i>
                                            中风险 - 端口扫描活动
                                        </div>
                                        <span class="threat-badge medium">警告</span>
                                    </div>
                                    <div class="threat-desc">发现针对SSH(22)和RDP(3389)端口的系统性扫描行为，疑似暴力破解前奏</div>
                                    <div class="threat-meta">
                                        <div class="threat-severity">
                                            <span>威胁等级</span>
                                            <div class="severity-bar">
                                                <div class="severity-fill medium"></div>
                                            </div>
                                        </div>
                                        <span>5分钟前</span>
                                    </div>
                                </div>
                                
                                <div class="threat-item low-risk">
                                    <div class="threat-header">
                                        <div class="threat-title low-risk">
                                            <i class="fas fa-eye"></i>
                                            低风险 - 连接频率异常
                                        </div>
                                        <span class="threat-badge low">监控</span>
                                    </div>
                                    <div class="threat-desc">单一IP连接数超过正常阈值150%，需要持续关注是否为攻击前期探测</div>
                                    <div class="threat-meta">
                                        <div class="threat-severity">
                                            <span>威胁等级</span>
                                            <div class="severity-bar">
                                                <div class="severity-fill low"></div>
                                            </div>
                                        </div>
                                        <span>8分钟前</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI洞察视图 -->
                        <div class="content-view" id="insightsView">
                            <div class="insight-items-container">
                                <div class="insight-item">
                                    <div class="insight-header">
                                        <div class="insight-title">
                                            <i class="fas fa-robot"></i>
                                            攻击模式识别
                                        </div>
                                        <div class="insight-confidence">
                                            <span>96.8%</span>
                                            <div class="confidence-bar">
                                                <div class="confidence-fill" style="width: 97%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="insight-desc">AI识别出3种新的混合攻击模式，结合SYN+UDP+HTTP多协议攻击手法，建议更新检测规则</div>
                                </div>
                                
                                <div class="insight-item">
                                    <div class="insight-header">
                                        <div class="insight-title">
                                            <i class="fas fa-chart-line"></i>
                                            攻击趋势预测
                                        </div>
                                        <div class="insight-confidence">
                                            <span>89.3%</span>
                                            <div class="confidence-bar">
                                                <div class="confidence-fill" style="width: 89%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="insight-desc">基于历史数据分析，预测未来2小时内攻击强度将增加45%，峰值可能达到850K pps</div>
                                </div>
                                
                                <div class="insight-item">
                                    <div class="insight-header">
                                        <div class="insight-title">
                                            <i class="fas fa-cogs"></i>
                                            策略优化建议
                                        </div>
                                        <div class="insight-confidence">
                                            <span>92.1%</span>
                                            <div class="confidence-bar">
                                                <div class="confidence-fill" style="width: 92%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="insight-desc">建议调整TCP连接超时时间至3秒，启用自适应阈值算法，可提升检测效率27%</div>
                                </div>
                                
                                <div class="insight-item">
                                    <div class="insight-header">
                                        <div class="insight-title">
                                            <i class="fas fa-exclamation-circle"></i>
                                            异常行为检测
                                        </div>
                                        <div class="insight-confidence">
                                            <span>78.5%</span>
                                            <div class="confidence-bar">
                                                <div class="confidence-fill" style="width: 79%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="insight-desc">检测到系统响应时间异常波动，平均延迟增加35%，可能存在性能瓶颈或资源耗尽</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 第二个面板：智能知识库 -->
                <div class="panel glass-effect knowledge-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <i class="fas fa-book" style="color: #38a169;"></i>
                            智能知识库
                        </div>
                        <div style="font-size: 10px; color: #718096;">1250+ 条目</div>
                    </div>
                    <div class="panel-content">
                        <input type="text" class="knowledge-search" placeholder="搜索安全知识、策略、解决方案..." id="knowledgeSearch">
                        
                        <div class="knowledge-item" onclick="insertKnowledge('DDoS攻击防护策略')">
                            <div class="knowledge-title">
                                <i class="fas fa-shield-alt"></i>
                                DDoS攻击防护策略
                            </div>
                            <div class="knowledge-desc">包含L3/L4/L7层防护方案、流量清洗技术、黑洞路由配置等完整防护体系</div>
                            <div class="knowledge-tags">
                                <span class="knowledge-tag">防护</span>
                                <span class="knowledge-tag">策略</span>
                                <span class="knowledge-tag">多层防护</span>
                            </div>
                        </div>
                        
                        <div class="knowledge-item" onclick="insertKnowledge('HTTP Flood检测方法')">
                            <div class="knowledge-title">
                                <i class="fas fa-globe"></i>
                                HTTP Flood检测方法
                            </div>
                            <div class="knowledge-desc">基于行为分析的HTTP洪水攻击检测技术，包含请求特征分析、频率限制等</div>
                            <div class="knowledge-tags">
                                <span class="knowledge-tag">检测</span>
                                <span class="knowledge-tag">HTTP</span>
                                <span class="knowledge-tag">行为分析</span>
                            </div>
                        </div>
                        
                        <div class="knowledge-item" onclick="insertKnowledge('深度包检测技术')">
                            <div class="knowledge-title">
                                <i class="fas fa-chart-area"></i>
                                深度包检测技术
                            </div>
                            <div class="knowledge-desc">DPI技术原理、实现方法、性能优化策略，支持多协议深度分析</div>
                            <div class="knowledge-tags">
                                <span class="knowledge-tag">分析</span>
                                <span class="knowledge-tag">DPI</span>
                                <span class="knowledge-tag">协议</span>
                            </div>
                        </div>
                        
                        <div class="knowledge-item" onclick="insertKnowledge('智能IP黑名单管理')">
                            <div class="knowledge-title">
                                <i class="fas fa-ban"></i>
                                智能IP黑名单管理
                            </div>
                            <div class="knowledge-desc">基于AI的动态黑名单管理系统，支持自动更新、地理位置过滤、信誉评分</div>
                            <div class="knowledge-tags">
                                <span class="knowledge-tag">管理</span>
                                <span class="knowledge-tag">IP过滤</span>
                                <span class="knowledge-tag">AI算法</span>
                            </div>
                        </div>

                        <div class="knowledge-item" onclick="insertKnowledge('应急响应预案')">
                            <div class="knowledge-title">
                                <i class="fas fa-ambulance"></i>
                                应急响应预案
                            </div>
                            <div class="knowledge-desc">包含攻击发现、影响评估、应对措施、恢复流程的完整应急响应体系</div>
                            <div class="knowledge-tags">
                                <span class="knowledge-tag">应急</span>
                                <span class="knowledge-tag">响应</span>
                                <span class="knowledge-tag">预案</span>
                            </div>
                        </div>

                        <div class="knowledge-item" onclick="insertKnowledge('网络取证技术')">
                            <div class="knowledge-title">
                                <i class="fas fa-search-plus"></i>
                                网络取证技术
                            </div>
                            <div class="knowledge-desc">数字取证方法、证据保全技术、攻击溯源分析，支持法律举证</div>
                            <div class="knowledge-tags">
                                <span class="knowledge-tag">取证</span>
                                <span class="knowledge-tag">溯源</span>
                                <span class="knowledge-tag">分析</span>
                            </div>
                        </div>

                        <div class="knowledge-item" onclick="insertKnowledge('云安全防护')">
                            <div class="knowledge-title">
                                <i class="fas fa-cloud-shield-alt"></i>
                                云安全防护
                            </div>
                            <div class="knowledge-desc">云环境下的DDoS防护方案、CDN加速、智能调度等现代化防护技术</div>
                            <div class="knowledge-tags">
                                <span class="knowledge-tag">云安全</span>
                                <span class="knowledge-tag">CDN</span>
                                <span class="knowledge-tag">调度</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const chatInput = document.getElementById('chatInput');
        const typingIndicator = document.getElementById('typingIndicator');

        // 增强的AI回复模板
        const aiResponses = [
            {
                trigger: ['威胁', '攻击', '安全', '检测'],
                response: `根据实时监控数据，我发现了以下安全威胁：

🚨 <strong>当前威胁级别：中等偏高</strong>
• 检测到7个活跃威胁源，较昨日增加40%
• 主要攻击类型：HTTP Flood、TCP SYN Flood、UDP Amplification
• 攻击强度峰值：850K pps (超出基线35%)

<div class="message-table">
<table>
<tr><th>威胁类型</th><th>活跃源</th><th>拦截率</th><th>风险等级</th></tr>
<tr><td>DDoS攻击</td><td>23个</td><td style="color:#38a169;">96.8%</td><td style="color:#e53e3e;">高危</td></tr>
<tr><td>端口扫描</td><td>15个</td><td style="color:#38a169;">99.1%</td><td style="color:#d69e2e;">中危</td></tr>
<tr><td>异常连接</td><td>8个</td><td style="color:#38a169;">94.2%</td><td style="color:#38a169;">低危</td></tr>
</table>
</div>

💡 <strong>AI智能建议：</strong>
1. 立即启用高级防护模式 (推荐置信度: 94%)
2. 调整连接阈值至50conn/s，启用渐进式限流
3. 激活地理位置过滤，重点关注高风险地区
4. 建议在16:00-18:00时段提高告警敏感度

需要我为您生成详细的威胁分析报告吗？`
            },
            {
                trigger: ['性能', '优化', '慢', '延迟', '资源'],
                response: `系统性能深度分析完成：

📊 <strong>当前性能指标：</strong>

<div class="message-table">
<table>
<tr><th>性能指标</th><th>当前值</th><th>基线值</th><th>状态</th></tr>
<tr><td>CPU使用率</td><td>68%</td><td>45%</td><td style="color:#d69e2e;">偏高</td></tr>
<tr><td>内存使用率</td><td>72%</td><td>60%</td><td style="color:#d69e2e;">偏高</td></tr>
<tr><td>网络延迟</td><td>15ms</td><td>12ms</td><td style="color:#38a169;">正常</td></tr>
<tr><td>数据库响应</td><td>120ms</td><td>80ms</td><td style="color:#e53e3e;">需优化</td></tr>
</table>
</div>

🔍 <strong>性能瓶颈分析：</strong>
• <strong>数据库查询：</strong>慢查询增加45%，主要集中在日志表
• <strong>内存泄漏：</strong>检测模块内存使用持续增长
• <strong>网络I/O：</strong>连接池接近饱和状态

⚡ <strong>优化建议方案：</strong>
1. <strong>数据库优化：</strong>添加复合索引，优化慢查询语句
2. <strong>内存管理：</strong>启用内存回收机制，设置3小时回收周期
3. <strong>负载均衡：</strong>启用多节点分流，减少单点压力
4. <strong>缓存策略：</strong>增加Redis缓存层，缓存热点数据

预计优化后性能提升25-40%，是否立即应用这些建议？`
            },
            {
                trigger: ['报告', '统计', '分析', '数据', '趋势'],
                response: `正在生成综合安全分析报告...

📋 <strong>DDosSeek 深度安全态势报告</strong>

<div style="background: rgba(0, 0, 0, 0.05); padding: 12px; border-radius: 8px; margin: 8px 0; font-family: monospace; font-size: 12px;">
==========================================
报告生成时间: ${new Date().toLocaleString('zh-CN')}
分析时间段: 最近24小时
数据源: 实时监控 + 历史分析 + AI预测
==========================================
</div>

📊 <strong>威胁统计概览：</strong>

<div class="message-table">
<table>
<tr><th>安全指标</th><th>24小时</th><th>7天平均</th><th>变化趋势</th><th>风险评级</th></tr>
<tr><td>总攻击次数</td><td>1,247</td><td>1,105</td><td style="color:#e53e3e;">↑12.8%</td><td style="color:#d69e2e;">偏高</td></tr>
<tr><td>拦截成功率</td><td>99.2%</td><td>99.0%</td><td style="color:#38a169;">↑0.2%</td><td style="color:#38a169;">优秀</td></tr>
<tr><td>误报数量</td><td>3</td><td>9</td><td style="color:#38a169;">↓67%</td><td style="color:#38a169;">良好</td></tr>
<tr><td>平均响应时间</td><td>0.8s</td><td>0.9s</td><td style="color:#38a169;">↓11%</td><td style="color:#38a169;">优秀</td></tr>
<tr><td>资源消耗</td><td>68%</td><td>52%</td><td style="color:#e53e3e;">↑31%</td><td style="color:#d69e2e;">关注</td></tr>
</table>
</div>

🎯 <strong>AI智能预测：</strong>
• <strong>攻击趋势：</strong>预计未来6小时攻击强度将增加35%
• <strong>高风险时段：</strong>16:00-18:00 (GMT+8)，19:00-21:00 (GMT+8)
• <strong>攻击类型变化：</strong>HTTP Flood比例上升，SYN Flood下降
• <strong>地理分布：</strong>美国(35%) > 俄罗斯(28%) > 中国(15%)

🔥 <strong>重点关注事件：</strong>
1. 103.45.67.0/24网段协调攻击行为
2. 新型混合协议攻击模式出现
3. 慢速HTTP攻击尝试绕过检测

是否需要导出详细的PDF报告或设置自动报告推送？`
            },
            {
                trigger: ['帮助', '功能', '使用', '指南'],
                response: `欢迎使用DDosSeek AI智能助手！我可以为您提供以下专业服务：

🛡️ <strong>威胁分析服务：</strong>
• 实时DDoS攻击检测与模式识别
• 异常流量行为分析与告警
• 攻击源地理位置追踪与分析
• 威胁情报关联分析与风险评估

🔍 <strong>智能诊断服务：</strong>
• 网络安全问题根因分析
• 系统性能瓶颈智能定位
• 配置合规性检查与建议
• 安全策略有效性评估

📊 <strong>数据洞察服务：</strong>
• 安全态势可视化分析
• 攻击趋势预测与预警
• 防护效果量化评估
• 业务影响风险评估

🎯 <strong>策略优化服务：</strong>
• 个性化防护策略生成
• 规则配置智能优化建议
• 应急响应预案制定
• 安全架构改进建议

💡 <strong>使用技巧：</strong>
• 直接描述遇到的问题，我会智能分析
• 使用快捷按钮快速获取常用分析
• 支持上传日志文件进行深度分析
• 可以请求生成详细的技术报告

请告诉我您需要哪方面的帮助，我会为您提供专业的分析建议！`
            },
            {
                trigger: ['预测', '趋势', '未来', '预警'],
                response: `基于机器学习模型的攻击趋势预测分析：

📈 <strong>短期预测 (未来6小时)：</strong>
• <strong>攻击强度：</strong>预计增长35-45%，峰值可达950K pps
• <strong>攻击类型：</strong>HTTP Flood将成为主要攻击手段(占比52%)
• <strong>地理来源：</strong>亚太地区攻击源可能增加60%
• <strong>目标端口：</strong>80/443端口压力将显著增加

📊 <strong>中期预测 (未来24小时)：</strong>

<div class="message-table">
<table>
<tr><th>时间段</th><th>攻击强度</th><th>主要类型</th><th>风险等级</th></tr>
<tr><td>16:00-18:00</td><td style="color:#e53e3e;">850K pps</td><td>HTTP+SYN混合</td><td style="color:#e53e3e;">高危</td></tr>
<tr><td>19:00-21:00</td><td style="color:#e53e3e;">720K pps</td><td>UDP放大攻击</td><td style="color:#d69e2e;">中危</td></tr>
<tr><td>22:00-02:00</td><td style="color:#38a169;">350K pps</td><td>探测扫描</td><td style="color:#38a169;">低危</td></tr>
<tr><td>03:00-08:00</td><td style="color:#38a169;">180K pps</td><td>零星攻击</td><td style="color:#38a169;">低危</td></tr>
</table>
</div>

🎯 <strong>AI预测模型置信度：</strong>
• 短期预测(6小时)：92.3%
• 中期预测(24小时)：87.6%
• 攻击类型预测：89.1%
• 强度预测：91.4%

⚠️ <strong>预警建议：</strong>
1. <strong>立即行动：</strong>提前30分钟启用高级防护模式
2. <strong>资源准备：</strong>确保备用带宽和服务器资源充足
3. <strong>监控加强：</strong>在高风险时段增加人工监控
4. <strong>应急预案：</strong>准备紧急切换至云防护方案

是否需要我为您设置自动预警通知或生成应对策略？`
            },
            {
                trigger: ['策略', '配置', '规则', '防护'],
                response: `智能防护策略分析与优化建议：

🛡️ <strong>当前防护策略评估：</strong>

<div class="message-table">
<table>
<tr><th>防护层级</th><th>当前配置</th><th>建议配置</th><th>优化效果</th></tr>
<tr><td>连接阈值</td><td>200/s</td><td style="color:#3182ce;">100/s</td><td style="color:#38a169;">↑25%检测率</td></tr>
<tr><td>包大小限制</td><td>1500字节</td><td style="color:#3182ce;">1200字节</td><td style="color:#38a169;">↑15%拦截率</td></tr>
<tr><td>地理过滤</td><td>未启用</td><td style="color:#3182ce;">启用高风险地区</td><td style="color:#38a169;">↑40%精准度</td></tr>
<tr><td>行为分析</td><td>基础模式</td><td style="color:#3182ce;">AI深度学习</td><td style="color:#38a169;">↑60%准确率</td></tr>
</table>
</div>

⚙️ <strong>策略优化方案：</strong>

<div style="background: rgba(49, 130, 206, 0.1); padding: 12px; border-radius: 8px; margin: 8px 0;">
<strong>方案A - 渐进式优化（推荐）：</strong><br>
• 第一阶段：调整基础阈值，启用地理过滤<br>
• 第二阶段：部署AI行为分析模块<br>
• 第三阶段：启用自适应学习算法<br>
<strong>预计效果：</strong>检测率提升35%，误报率降低50%
</div>

<div style="background: rgba(214, 158, 46, 0.1); padding: 12px; border-radius: 8px; margin: 8px 0;">
<strong>方案B - 激进式升级：</strong><br>
• 全面启用AI防护引擎<br>
• 部署多层防护矩阵<br>
• 启用实时威胁情报联动<br>
<strong>预计效果：</strong>检测率提升60%，但资源消耗增加40%
</div>

🎯 <strong>个性化规则建议：</strong>
1. <strong>HTTP防护：</strong>启用请求频率限制 (15req/s/IP)
2. <strong>TCP防护：</strong>启用SYN Cookie机制
3. <strong>UDP防护：</strong>启用源验证和速率限制
4. <strong>应用层：</strong>启用JavaScript质疑验证

您倾向于选择哪种优化方案？我可以为您生成详细的实施计划。`
            }
        ];

        // 增强的默认回复
        const defaultResponses = [
            `我理解您的问题。基于当前系统状态和安全数据，让我为您深度分析：

🤖 <strong>AI分析流程：</strong>
• 正在调用DeepSeek多模态模型进行语义理解
• 结合实时监控数据进行关联分析  
• 检索安全知识库匹配最佳实践
• 生成个性化解决方案

⏱️ <strong>分析进度：</strong>
1. ✅ 问题理解与分类
2. ⏳ 数据关联分析中...
3. ⏳ 解决方案生成中...

请稍等片刻，我正在为您准备详细的专业分析结果...`,

            `我已经理解您的需求，正在进行深度分析：

🔍 <strong>智能分析引擎：</strong>
• 调用威胁情报数据库进行模式匹配
• 运行机器学习模型预测风险等级
• 对比历史案例寻找最佳解决方案
• 结合实时系统状态生成建议

📊 <strong>分析维度：</strong>
• 技术层面：协议分析、流量特征、攻击手法
• 业务层面：影响评估、风险等级、紧急程度  
• 策略层面：防护方案、优化建议、预防措施

正在为您生成专业的技术分析报告，请稍候...`,

            `感谢您的问题！我正在运用AI技术为您提供专业分析：

🧠 <strong>DeepSeek AI处理：</strong>
• 自然语言理解：问题语义分析与意图识别
• 知识图谱检索：相关技术文档与案例匹配
• 智能推理：基于当前情况的逻辑分析
• 方案生成：个性化建议与实施指导

⚡ <strong>实时数据融合：</strong>
• 当前威胁态势：${Math.floor(Math.random() * 20 + 40)}个威胁源监控中
• 系统性能状态：CPU ${Math.floor(Math.random() * 30 + 50)}% | 内存 ${Math.floor(Math.random() * 40 + 45)}%
• 防护策略状态：${Math.floor(Math.random() * 15 + 85)}%规则生效中

正在整合所有信息为您提供最优解决方案...`
        ];

        // 发送消息
        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;

            // 添加用户消息
            addMessage('user', message);
            chatInput.value = '';
            chatInput.style.height = 'auto';

            // 显示AI正在输入
            showTyping();

            // 模拟AI回复延迟 (更真实的延迟时间)
            const delay = 1500 + Math.random() * 2000; // 1.5-3.5秒
            setTimeout(() => {
                hideTyping();
                const response = getAIResponse(message);
                addMessage('ai', response);
                
                // 模拟后续分析
                if (Math.random() > 0.7) {
                    setTimeout(() => {
                        addMessage('ai', generateFollowUpAnalysis(message));
                    }, 2000 + Math.random() * 1000);
                }
            }, delay);
        }

        // 快速消息
        function sendQuickMessage(message) {
            chatInput.value = message;
            sendMessage();
        }

        // 添加消息到聊天容器
        function addMessage(type, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const currentTime = new Date().toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            messageDiv.innerHTML = `
                <div class="message-avatar">${type === 'ai' ? 'AI' : 'U'}</div>
                <div class="message-content">
                    <div>${content}</div>
                    <div class="message-time">${currentTime}</div>
                </div>
            `;

            chatContainer.insertBefore(messageDiv, typingIndicator);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // 添加新消息动画
            messageDiv.style.opacity = '0';
            messageDiv.style.transform = 'translateY(20px)';
            setTimeout(() => {
                messageDiv.style.opacity = '1';
                messageDiv.style.transform = 'translateY(0)';
                messageDiv.style.transition = 'all 0.4s ease';
            }, 100);
        }

        // 显示AI正在输入
        function showTyping() {
            const typingTexts = [
                'AI正在深度分析...',
                'DeepSeek正在思考...',
                '正在调用威胁情报...',
                '正在生成解决方案...',
                '智能引擎分析中...'
            ];
            
            const randomText = typingTexts[Math.floor(Math.random() * typingTexts.length)];
            typingIndicator.querySelector('div:nth-child(2)').textContent = randomText;
            typingIndicator.style.display = 'flex';
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // 隐藏AI正在输入
        function hideTyping() {
            typingIndicator.style.display = 'none';
        }

        // 获取AI回复
        function getAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            for (const response of aiResponses) {
                if (response.trigger.some(trigger => lowerMessage.includes(trigger))) {
                    return response.response;
                }
            }
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }

        // 生成后续分析
        function generateFollowUpAnalysis(originalMessage) {
            const followUps = [
                `📋 <strong>补充分析：</strong>

基于您的问题，我还发现了以下关联信息：

• <strong>相关安全事件：</strong>过去7天内检测到${Math.floor(Math.random() * 50 + 100)}起类似事件
• <strong>行业趋势：</strong>该类型攻击在同行业中增长${Math.floor(Math.random() * 30 + 20)}%
• <strong>技术建议：</strong>建议关注最新的CVE安全公告
• <strong>预防措施：</strong>可考虑部署蜜罐系统进行攻击诱导

需要我为您详细分析任何一个方面吗？`,

                `🔬 <strong>深度技术分析：</strong>

根据刚才的讨论，我补充以下技术细节：

• <strong>攻击向量分析：</strong>识别出${Math.floor(Math.random() * 5 + 3)}种潜在攻击路径
• <strong>漏洞关联度：</strong>与已知CVE的匹配度为${Math.floor(Math.random() * 40 + 60)}%
• <strong>修复优先级：</strong>建议在${Math.floor(Math.random() * 24 + 12)}小时内处理
• <strong>业务影响：</strong>当前风险等级评估为${['低', '中', '高'][Math.floor(Math.random() * 3)]}

是否需要我生成技术实施的详细步骤指南？`,

                `💡 <strong>AI智能建议更新：</strong>

基于实时数据分析，我更新了以下建议：

• <strong>新发现：</strong>检测到相似攻击模式在其他节点出现
• <strong>策略调整：</strong>建议提高告警阈值至${Math.floor(Math.random() * 50 + 100)}%
• <strong>资源配置：</strong>当前CPU负载${Math.floor(Math.random() * 30 + 50)}%，建议扩容
• <strong>监控重点：</strong>重点关注${['端口22', '端口80', '端口443', 'DNS服务'][Math.floor(Math.random() * 4)]}

我会持续监控情况变化并及时提醒您。`
            ];
            
            return followUps[Math.floor(Math.random() * followUps.length)];
        }

        // 插入知识库内容
        function insertKnowledge(topic) {
            const knowledgeResponses = {
                'DDoS攻击防护策略': '请详细介绍DDoS攻击的多层防护策略，包括L3/L4/L7层的具体防护方法',
                'HTTP Flood检测方法': '我需要了解HTTP洪水攻击的检测技术和防护措施',
                '网络流量分析技术': '请介绍深度包检测(DPI)技术的原理和实现方法',
                '智能IP黑名单管理': '如何构建基于AI的动态IP黑名单管理系统？',
                '应急响应预案': '请帮我制定完整的DDoS攻击应急响应预案'
            };
            
            chatInput.value = knowledgeResponses[topic] || `请详细介绍一下${topic}的相关知识和实施方案`;
            chatInput.focus();
        }

        // 回车发送消息
        chatInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // 自动调整输入框高度
        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 80) + 'px';
        });

        // 知识库搜索功能增强
        document.getElementById('knowledgeSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const knowledgeItems = document.querySelectorAll('.knowledge-item');
            
            knowledgeItems.forEach(item => {
                const title = item.querySelector('.knowledge-title').textContent.toLowerCase();
                const desc = item.querySelector('.knowledge-desc')?.textContent.toLowerCase() || '';
                const tags = Array.from(item.querySelectorAll('.knowledge-tag')).map(tag => tag.textContent.toLowerCase()).join(' ');
                
                const isMatch = title.includes(searchTerm) || desc.includes(searchTerm) || tags.includes(searchTerm) || searchTerm === '';
                
                item.style.display = isMatch ? 'block' : 'none';
                if (isMatch && searchTerm !== '') {
                    item.style.background = 'rgba(49, 130, 206, 0.1)';
                    item.style.borderColor = '#3182ce';
                } else {
                    item.style.background = '';
                    item.style.borderColor = '';
                }
            });
        });

        // 面板切换功能
        function initPanelSwitcher() {
            const switcher = document.getElementById('panelSwitcher');
            const switchBtns = switcher.querySelectorAll('.switch-btn');
            const threatsView = document.getElementById('threatsView');
            const insightsView = document.getElementById('insightsView');

            switchBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetView = btn.getAttribute('data-view');
                    
                    // 更新按钮状态
                    switchBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // 更新切换器状态
                    if (targetView === 'insights') {
                        switcher.classList.add('insights-active');
                    } else {
                        switcher.classList.remove('insights-active');
                    }
                    
                    // 切换视图
                    if (targetView === 'threats') {
                        threatsView.classList.add('active');
                        insightsView.classList.remove('active');
                    } else {
                        threatsView.classList.remove('active');
                        insightsView.classList.add('active');
                    }
                });
            });
        }

        // 定时更新威胁数据
        function updateThreatData() {
            // 更新统计数据
            const statValues = document.querySelectorAll('.stat-value');
            if (statValues.length >= 4) {
                statValues[0].textContent = Math.floor(Math.random() * 10 + 5); // 活跃威胁
                statValues[1].textContent = Math.floor(Math.random() * 20 + 15); // 待处理
                statValues[2].textContent = Math.floor(Math.random() * 50 + 120); // 已拦截
                statValues[3].textContent = (Math.random() * 2 + 98).toFixed(1) + '%'; // 成功率
            }

            // 更新威胁时间
            const threatMetas = document.querySelectorAll('.threat-meta span:last-child');
            const timeTexts = ['刚刚', '1分钟前', '2分钟前', '3分钟前', '5分钟前'];
            threatMetas.forEach(meta => {
                meta.textContent = timeTexts[Math.floor(Math.random() * timeTexts.length)];
            });

            // 更新AI状态响应时间
            const statusElement = document.querySelector('.chat-status');
            if (statusElement) {
                const responseTime = (Math.random() * 0.5 + 0.5).toFixed(1);
                statusElement.innerHTML = `
                    <div class="status-dot"></div>
                    在线服务 · 响应时间 <strong>${responseTime}s</strong>
                `;
            }
        }

        // 模拟新威胁事件
        function addThreatEvent() {
            const threats = [
                { 
                    level: 'high-risk', 
                    title: '高风险 - 分布式协同攻击', 
                    desc: '检测到来自多个国家的协调DDoS攻击，涉及25个攻击源',
                    badge: '严重',
                    icon: 'fas fa-exclamation-triangle'
                },
                { 
                    level: 'medium-risk', 
                    title: '中风险 - 应用层攻击尝试', 
                    desc: '发现针对Web应用的慢速HTTP攻击，正在尝试绕过防护',
                    badge: '警告',
                    icon: 'fas fa-globe'
                },
                { 
                    level: 'low-risk', 
                    title: '低风险 - 探测扫描活动', 
                    desc: '检测到自动化工具的端口扫描行为，可能为攻击前期准备',
                    badge: '监控',
                    icon: 'fas fa-search'
                }
            ];
            
            const threat = threats[Math.floor(Math.random() * threats.length)];
            const threatItems = document.querySelectorAll('.threat-item');
            
            if (threatItems.length > 0) {
                const randomItem = threatItems[Math.floor(Math.random() * threatItems.length)];
                
                // 更新威胁信息
                randomItem.className = `threat-item ${threat.level}`;
                const titleElement = randomItem.querySelector('.threat-title');
                if (titleElement) {
                    titleElement.className = `threat-title ${threat.level}`;
                    titleElement.innerHTML = `<i class="${threat.icon}"></i>${threat.title}`;
                }
                
                const descElement = randomItem.querySelector('.threat-desc');
                if (descElement) {
                    descElement.textContent = threat.desc;
                }
                
                const badgeElement = randomItem.querySelector('.threat-badge');
                if (badgeElement) {
                    badgeElement.className = `threat-badge ${threat.level.split('-')[0]}`;
                    badgeElement.textContent = threat.badge;
                }
                
                // 添加闪烁效果
                randomItem.style.animation = 'none';
                setTimeout(() => {
                    randomItem.style.animation = 'pulse 2s ease-in-out 3';
                }, 100);
            }
        }

        // 模拟AI洞察更新
        function updateAIInsights() {
            const insights = [
                {
                    title: '新型攻击模式识别',
                    desc: 'AI识别出结合IoT设备的新型僵尸网络攻击模式，建议更新检测规则',
                    confidence: Math.floor(Math.random() * 20 + 80),
                    icon: 'fas fa-robot'
                },
                {
                    title: '防护效果预测',
                    desc: '基于当前配置预测，防护成功率可提升至99.5%，建议应用优化方案',
                    confidence: Math.floor(Math.random() * 15 + 85),
                    icon: 'fas fa-chart-line'
                },
                {
                    title: '资源优化建议',
                    desc: '检测到内存使用异常，建议启用智能缓存机制以提升25%性能',
                    confidence: Math.floor(Math.random() * 25 + 70),
                    icon: 'fas fa-memory'
                },
                {
                    title: '攻击趋势预测',
                    desc: '基于历史数据分析，预测未来2小时内攻击强度将增加45%',
                    confidence: Math.floor(Math.random() * 20 + 75),
                    icon: 'fas fa-chart-area'
                }
            ];
            
            const insightItems = document.querySelectorAll('.insight-item');
            if (insightItems.length > 0) {
                const randomInsight = insights[Math.floor(Math.random() * insights.length)];
                const randomItem = insightItems[Math.floor(Math.random() * insightItems.length)];
                
                const titleElement = randomItem.querySelector('.insight-title');
                if (titleElement) {
                    titleElement.innerHTML = `<i class="${randomInsight.icon}"></i>${randomInsight.title}`;
                }
                
                const descElement = randomItem.querySelector('.insight-desc');
                if (descElement) {
                    descElement.textContent = randomInsight.desc;
                }
                
                const confidenceElement = randomItem.querySelector('.insight-confidence span');
                const confidenceFill = randomItem.querySelector('.confidence-fill');
                if (confidenceElement && confidenceFill) {
                    confidenceElement.textContent = randomInsight.confidence + '%';
                    confidenceFill.style.width = randomInsight.confidence + '%';
                }
                
                // 添加更新动画
                randomItem.style.animation = 'none';
                setTimeout(() => {
                    randomItem.style.animation = 'pulse 1.5s ease-in-out 2';
                }, 100);
            }
        }

        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化面板切换
            initPanelSwitcher();
            
            // 初始化数据更新
            updateThreatData();
            
            // 添加页面载入动画
            const panels = document.querySelectorAll('.panel');
            panels.forEach((panel, index) => {
                panel.style.opacity = '0';
                panel.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    panel.style.opacity = '1';
                    panel.style.transform = 'translateY(0)';
                    panel.style.transition = 'all 0.6s ease';
                }, index * 200);
            });
            
            // 聚焦输入框
            setTimeout(() => {
                chatInput.focus();
            }, 1000);
        });

        // 定时更新任务
        setInterval(updateThreatData, 15000); // 15秒更新威胁数据
        setInterval(addThreatEvent, 30000); // 30秒添加新威胁事件
        setInterval(updateAIInsights, 45000); // 45秒更新AI洞察

        // 初始化路由管理器
        const router = new DDosSeekRouter('deepseek-assistant');
    </script>
    <script src="router.js"></script>
</body>
</html> 