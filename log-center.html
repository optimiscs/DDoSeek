<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDosSeek - 智能日志中心</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 50%, #f7fafc 100%);
            color: #2d3748;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .top-navbar {
            height: 64px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            color: #1890ff;
        }

        .logo i {
            margin-right: 12px;
            font-size: 24px;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 16px;
            color: #4a5568;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1890ff, #52c41a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* 左侧边栏 - 统一样式 */
        .sidebar {
            position: fixed;
            left: 0;
            top: 64px;
            bottom: 0;
            width: 240px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
            padding: 24px 0;
            z-index: 999;
            transition: all 0.3s ease;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
        }

        .sidebar-menu {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .sidebar-menu li {
            margin: 4px 16px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            color: #4a5568;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .sidebar-menu a:hover, .sidebar-menu a.active {
            background: rgba(24, 144, 255, 0.1);
            color: #1890ff;
            transform: translateX(2px);
        }

        .sidebar-menu i {
            width: 20px;
            margin-right: 12px;
            font-size: 16px;
            text-align: center;
        }

        .main-content {
            margin-left: 240px;
            margin-top: 64px;
            padding: 24px;
            min-height: calc(100vh - 64px);
        }

        .page-header {
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .log-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: rgba(56, 161, 105, 0.2);
            color: #38a169;

        }

        .action-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary { background: #3182ce; color: white; }
        .btn-success { background: #38a169; color: white; }
        .btn-warning { background: #d69e2e; color: white; }
        .btn-danger { background: #e53e3e; color: white; }

        .btn-primary:hover { background: #2c5282; }
        .btn-success:hover { background: #2f855a; }
        .btn-warning:hover { background: #b7791f; }
        .btn-danger:hover { background: #c53030; }

        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            padding: 24px;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(24, 144, 255, 0.8);
        }

        .stat-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .stat-label {
            font-size: 13px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            font-weight: 600;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .stat-icon::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: iconShine 2s infinite;
        }

        @keyframes iconShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
            100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        }

        .stat-value-container {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 800;
            line-height: 1;
        }

        .stat-change {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 12px;
        }

        .stat-change.positive {
            background: rgba(239, 68, 68, 0.1);
            color: #e53e3e;
        }

        .stat-change.negative {
            background: rgba(56, 161, 105, 0.1);
            color: #38a169;
        }

        .stat-change.neutral {
            background: rgba(113, 128, 150, 0.1);
            color: #718096;
        }

        .stat-bottom {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .stat-subtitle {
            font-size: 12px;
            color: #718096;
            font-weight: 500;
        }

        .stat-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            font-weight: 600;
            color: #4a5568;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-dot.active { background: #22c55e; }
        .status-dot.warning { background: #f59e0b; }
        .status-dot.danger { background: #ef4444; }

        .stat-mini-chart {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }

        .stat-mini-chart-fill {
            height: 100%;
            background: linear-gradient(90deg, #3182ce, #63b3ed);
            animation: chartFill 2s ease-out;
        }

        @keyframes chartFill {
            from { width: 0; }
            to { width: var(--fill-width); }
        }

        .control-section {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .filter-panel {
            padding: 20px;
        }

        .filter-group {
            margin-bottom: 20px;
        }

        .filter-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #2d3748;
        }

        .filter-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .filter-input:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
            background: white;
        }

        .filter-select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            margin-bottom: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .filter-select:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
            background: white;
        }

        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .filter-tag {
            padding: 6px 12px;
            background: rgba(49, 130, 206, 0.1);
            color: #3182ce;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid rgba(49, 130, 206, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .filter-tag::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.3s ease;
        }

        .filter-tag:hover::before {
            left: 100%;
        }

        .filter-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.2);
        }

        .filter-tag.active {
            background: linear-gradient(135deg, #3182ce, #2c5282);
            color: white;
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.3);
            transform: translateY(-1px);
        }

        .filter-tag.active:hover {
            background: linear-gradient(135deg, #2c5282, #2a4b7c);
        }

        .log-stream {
            padding: 20px;
        }

        .stream-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .stream-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
        }

        .stream-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stream-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .log-container {
            max-height: 400px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 8px;
            padding: 12px;
        }

        .log-entry {
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 4px solid transparent;
            font-family: 'SF Mono', 'Monaco', 'Cascadia Code', monospace;
            font-size: 13px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .log-entry::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .log-entry:hover::before {
            transform: translateX(100%);
        }

        .log-entry:hover {
            transform: translateX(8px) translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(0, 0, 0, 0.15);
        }

        .log-info { border-left-color: #3182ce; }
        .log-warn { border-left-color: #d69e2e; }
        .log-error { border-left-color: #e53e3e; }
        .log-debug { border-left-color: #805ad5; }
        .log-success { border-left-color: #38a169; }

        .log-timestamp {
            color: #718096;
            font-size: 10px;
            margin-right: 8px;
        }

        .log-level {
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            margin-right: 8px;
        }

        .level-info { background: rgba(49, 130, 206, 0.2); color: #3182ce; }
        .level-warn { background: rgba(214, 158, 46, 0.2); color: #d69e2e; }
        .level-error { background: rgba(229, 62, 62, 0.2); color: #e53e3e; }
        .level-debug { background: rgba(128, 90, 213, 0.2); color: #805ad5; }
        .level-success { background: rgba(56, 161, 105, 0.2); color: #38a169; }

        .log-message {
            color: #4a5568;
        }

        .analysis-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .chart-panel {
            padding: 20px;
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .panel-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
        }

        .ai-panel {
            padding: 20px;
            overflow: hidden;
        }

        .panel-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
        }

        .ai-cards-counter {
            margin-left: auto;
            background: rgba(49, 130, 206, 0.1);
            color: #3182ce;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .ai-navigation {
            display: flex;
            gap: 8px;
        }

        .ai-nav-btn {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            color: #4a5568;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .ai-nav-btn:hover {
            background: #3182ce;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.3);
        }

        .ai-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .ai-carousel-container {
            position: relative;
            overflow: hidden;
            margin: 16px 0;
        }

        .ai-carousel-wrapper {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .ai-insight-card {
            flex: 0 0 100%;
            padding: 24px 24px 24px 24px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            border: 1px solid rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            transition: all 0.4s ease;
            margin-right: 20px;
        }

        .ai-insight-card:last-child {
            margin-right: 0;
        }

        .card-background-pattern {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(49, 130, 206, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(56, 161, 105, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(214, 158, 46, 0.03) 0%, transparent 50%);
            pointer-events: none;
        }

        .insight-priority-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 4px 10px;
            border-radius: 16px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 4px;
            z-index: 3;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .insight-priority-badge.critical {
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
            border: 1px solid #dc2626;
        }

        .insight-priority-badge.warning {
            background: linear-gradient(135deg, #d97706, #f59e0b);
            color: white;
            border: 1px solid #d97706;
        }

        .insight-priority-badge.info {
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: white;
            border: 1px solid #2563eb;
        }

        .insight-priority-badge.success {
            background: linear-gradient(135deg, #059669, #10b981);
            color: white;
            border: 1px solid #059669;
        }

        .ai-insight-card.critical {
            border-left: 4px solid #e53e3e;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(254, 242, 242, 0.4));
        }

        .ai-insight-card.warning {
            border-left: 4px solid #d69e2e;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 251, 235, 0.4));
        }

        .ai-insight-card.info {
            border-left: 4px solid #3182ce;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(239, 246, 255, 0.4));
        }

        .ai-insight-card.success {
            border-left: 4px solid #38a169;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(240, 253, 244, 0.4));
        }

        .insight-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-right: 80px; /* 为优先级徽章留出空间 */
            position: relative;
        }

        .insight-title {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            flex: 1;
            margin-right: 16px; /* 与评分组件保持距离 */
        }

        .insight-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            flex-shrink: 0;
        }

        .title-content h3 {
            font-size: 18px;
            font-weight: 700;
            color: #2d3748;
            margin: 0 0 4px 0;
            line-height: 1.2;
        }

        .title-subtitle {
            font-size: 12px;
            color: #718096;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 0;
        }

        .insight-desc {
            font-size: 14px;
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .insight-score {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            min-width: 110px;
            max-width: 140px;
            flex-shrink: 0;
            margin-top: 8px; /* 向下偏移避免与徽章重叠 */
        }

        .score-icon {
            font-size: 16px;
        }

        .score-text {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .score-level {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            line-height: 1;
        }

        .score-value {
            font-size: 14px;
            font-weight: 700;
            line-height: 1;
            margin-top: 2px;
        }

        /* 威胁详情样式 */
        .threat-details {
            background: rgba(254, 242, 242, 0.5);
            border: 1px solid rgba(252, 165, 165, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .threat-source {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            font-size: 13px;
            font-weight: 600;
            color: #dc2626;
        }

        .threat-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .stat-item {
            text-align: center;
            padding: 8px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
        }

        .stat-label {
            display: block;
            font-size: 10px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .stat-value {
            display: block;
            font-size: 14px;
            font-weight: 700;
            color: #2d3748;
        }

        .stat-value.danger {
            color: #dc2626;
        }

        .stat-value.warning {
            color: #d97706;
        }

        /* 性能指标样式 */
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 12px;
        }

        .metric-item {
            background: rgba(255, 251, 235, 0.5);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
        }

        .metric-label {
            font-size: 11px;
            color: #92400e;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        .metric-value {
            font-size: 16px;
            font-weight: 700;
        }

        /* 安全分析样式 */
        .security-analysis {
            background: rgba(239, 246, 255, 0.5);
            border: 1px solid rgba(147, 197, 253, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .analysis-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            font-size: 13px;
            color: #1e40af;
        }

        .analysis-item i {
            width: 20px;
            text-align: center;
            color: #3b82f6;
        }

        /* 存储统计样式 */
        .storage-stats {
            background: rgba(243, 232, 255, 0.5);
            border: 1px solid rgba(196, 181, 253, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .storage-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
        }

        .storage-label {
            font-size: 12px;
            color: #6b21a8;
            font-weight: 500;
        }

        .storage-value {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 600;
            color: #2d3748;
        }

        .usage-bar {
            width: 60px;
            height: 6px;
            background: rgba(139, 69, 19, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .usage-fill {
            height: 100%;
            background: linear-gradient(90deg, #dc2626, #f59e0b);
            border-radius: 3px;
            transition: width 1s ease;
        }

        /* 健康指标样式 */
        .health-indicators {
            background: rgba(240, 253, 244, 0.5);
            border: 1px solid rgba(110, 231, 183, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .health-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
        }

        .health-icon {
            width: 32px;
            height: 32px;
            background: rgba(5, 150, 105, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #059669;
        }

        .health-info {
            flex: 1;
        }

        .health-label {
            display: block;
            font-size: 12px;
            color: #065f46;
            font-weight: 500;
        }

        .health-status {
            display: block;
            font-size: 13px;
            font-weight: 600;
        }

        .health-status.success {
            color: #059669;
        }

        /* 模式分析样式 */
        .pattern-analysis {
            background: rgba(255, 247, 237, 0.5);
            border: 1px solid rgba(251, 146, 60, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .pattern-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
        }

        .pattern-time {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #c2410c;
            font-weight: 500;
        }

        .pattern-stat {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .insight-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding: 12px 16px;
            background: rgba(248, 250, 252, 0.8);
            border-radius: 12px;
            border: 1px solid rgba(226, 232, 240, 0.5);
        }

        .meta-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .meta-info span {
            font-size: 11px;
            color: #64748b;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .meta-info i {
            width: 12px;
            text-align: center;
        }

        .confidence-container {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 11px;
            color: #64748b;
            font-weight: 600;
        }

        .confidence-value {
            font-weight: 700;
            color: #2d3748;
        }

        .insight-score {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .score-critical {
            background: rgba(239, 68, 68, 0.15);
            color: #c53030;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .score-warning {
            background: rgba(214, 158, 46, 0.15);
            color: #b7791f;
            border: 1px solid rgba(214, 158, 46, 0.3);
        }

        .score-info {
            background: rgba(49, 130, 206, 0.15);
            color: #2c5282;
            border: 1px solid rgba(49, 130, 206, 0.3);
        }

        .score-success {
            background: rgba(56, 161, 105, 0.15);
            color: #2f855a;
            border: 1px solid rgba(56, 161, 105, 0.3);
        }

        .confidence-bar {
            width: 60px;
            height: 6px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-left: 8px;
        }

        .confidence-bar.success {
            background: rgba(34, 197, 94, 0.2);
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #38a169, #68d391);
            border-radius: 3px;
            animation: confidenceGrow 1.5s ease-out;
        }

        @keyframes confidenceGrow {
            from { width: 0; }
            to { width: var(--confidence-width); }
        }

        .insight-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-start;
            flex-wrap: wrap;
        }

        .insight-btn {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: none;
            letter-spacing: 0.3px;
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 100px;
            justify-content: center;
        }

        .insight-btn.primary {
            background: linear-gradient(135deg, #3182ce, #2c5282);
            color: white;
            border: 1px solid #2c5282;
        }

        .insight-btn.primary:hover {
            background: linear-gradient(135deg, #2c5282, #2a4b7c);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.4);
        }

        .ai-carousel-indicators {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 20px;
            padding: 16px 0;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(160, 174, 192, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .indicator.active {
            background: #3182ce;
            transform: scale(1.2);
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.2);
        }

        .indicator:hover {
            background: rgba(49, 130, 206, 0.6);
            transform: scale(1.1);
        }

        .btn-apply {
            background: linear-gradient(135deg, #38a169, #2f855a);
            color: white;
        }

        .btn-dismiss {
            background: linear-gradient(135deg, #718096, #4a5568);
            color: white;
        }

        .btn-details {
            background: linear-gradient(135deg, #3182ce, #2c5282);
            color: white;
        }

        .insight-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        @media (max-width: 1200px) {
            .control-section {
                grid-template-columns: 1fr;
            }
            
            .analysis-section {
                grid-template-columns: 1fr;
            }

            /* AI卡片中等屏幕优化 */
            .insight-header {
                padding-right: 70px;
            }

            .insight-score {
                min-width: 100px;
                padding: 8px 12px;
            }
        }

        @media (max-width: 992px) {
            .insight-header {
                padding-right: 65px;
            }

            .title-content h3 {
                font-size: 16px;
            }

            .insight-icon {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
        }

        /* 响应式设计 - 统一标准 */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .main-content {
                margin-left: 0;
                transition: margin-left 0.3s ease;
            }
            
            .stats-section {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }



        @keyframes slideIn {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .new-log {
            animation: slideIn 0.3s ease;
        }

        .highlight {
            background: rgba(255, 235, 59, 0.2) !important;
            border-left-color: #ffeb3b !important;
        }

        .log-entry {
            display: flex !important;
            align-items: flex-start;
            gap: 12px;
        }

        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .suggestion-item {
            padding: 8px 12px;
            font-size: 13px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .suggestion-item:hover {
            background: rgba(49, 130, 206, 0.1);
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: #3182ce;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .notification {
            position: fixed;
            top: 80px;
            right: 24px;
            padding: 12px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 2000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.info { background: #3182ce; }
        .notification.success { background: #38a169; }
        .notification.warning { background: #d69e2e; }
        .notification.error { background: #e53e3e; }

        /* YouTube/B站风格的搜索工具栏 */
        .modern-toolbar {
            padding: 20px 32px;
            background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
            border-bottom: 1px solid #e2e8f0;
        }

        .toolbar-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .toolbar-bottom {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            position: relative;
        }

        .toolbar-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-section {
            max-width: 600px;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .search-controls {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .search-wrapper {
            position: relative;
            background: white;
            border-radius: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            overflow: hidden;
            width: 100%;
            max-width: 500px;
        }

        .search-wrapper:focus-within {
            box-shadow: 0 4px 16px rgba(49, 130, 206, 0.15);
            border-color: #3182ce;
        }

        .search-icon-left {
            padding: 0 16px;
            color: #a0aec0;
            font-size: 16px;
        }

        .modern-search-input {
            flex: 1;
            padding: 14px 0;
            border: none;
            font-size: 15px;
            color: #2d3748;
            background: transparent;
            outline: none;
        }

        .modern-search-input::placeholder {
            color: #a0aec0;
        }

        .search-actions {
            display: flex;
            align-items: center;
            padding-right: 4px;
        }

        .clear-search-btn {
            padding: 8px;
            background: none;
            border: none;
            color: #a0aec0;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.2s ease;
            margin-right: 4px;
        }

        .clear-search-btn:hover {
            background: #f7fafc;
            color: #4a5568;
        }

        .modern-search-btn {
            padding: 10px 20px;
            background: #3182ce;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .modern-search-btn:hover {
            background: #2c5282;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.3);
        }

        .filter-chips-container {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: all 0.3s ease;
            margin-top: 0;
        }

        .filter-chips-container.show {
            max-height: 200px;
            opacity: 1;
            margin-top: 16px;
        }

        .filter-toggle-btn {
            padding: 8px 12px;
            background: white;
            color: #4a5568;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
            position: relative;
        }

        .filter-toggle-btn:hover {
            background: #f7fafc;
            border-color: #cbd5e0;
            color: #3182ce;
        }

        .filter-toggle-btn.active {
            background: #3182ce;
            color: white;
            border-color: #3182ce;
        }

        .filter-toggle-icon {
            transition: transform 0.3s ease;
        }

        .filter-toggle-btn.active .filter-toggle-icon {
            transform: rotate(180deg);
        }

        .filter-count-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: #e53e3e;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 18px;
        }

        .filter-chip {
            position: relative;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 13px;
            color: #4a5568;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .filter-chip:hover {
            background: #f7fafc;
            border-color: #cbd5e0;
        }

        .filter-chip.active {
            background: #3182ce;
            color: white;
            border-color: #3182ce;
        }

        .filter-chip select {
            background: none;
            border: none;
            color: inherit;
            font-size: inherit;
            cursor: pointer;
            outline: none;
            appearance: none;
            padding-right: 16px;
        }

        .filter-chip::after {
            content: '\f078';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            font-size: 10px;
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }

        .action-buttons-group {
            display: flex;
            gap: 8px;
        }

        .modern-btn {
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .modern-btn.outline {
            background: white;
            color: #4a5568;
            border-color: #e2e8f0;
        }

        .modern-btn.outline:hover {
            background: #f7fafc;
            border-color: #cbd5e0;
        }

        .modern-btn.primary {
            background: #38a169;
            color: white;
        }

        .modern-btn.primary:hover {
            background: #2f855a;
            transform: translateY(-1px);
        }

        /* 现代化统计卡片 */
        .stats-cards-container {
            padding: 20px 24px;
            background: white;
            border-bottom: 1px solid #e2e8f0;
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }

        .stats-card {
            background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .stats-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-color, #3182ce);
        }

        .stats-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stats-card.total { --accent-color: #4a5568; }
        .stats-card.visible { --accent-color: #3182ce; }
        .stats-card.info { --accent-color: #38a169; }
        .stats-card.warning { --accent-color: #ed8936; }
        .stats-card.error { --accent-color: #e53e3e; }
        .stats-card.debug { --accent-color: #805ad5; }

        .stats-label {
            font-size: 12px;
            color: #718096;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .stats-value {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 4px;
        }

        .stats-icon {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-color, #3182ce);
            font-size: 14px;
        }

        /* 现代化表格样式 */
        .modern-table-container {
            background: white;
            border-radius: 0 0 12px 12px;
            overflow: hidden;
        }

        .table-wrapper {
            overflow-x: auto;
            max-height: 600px;
            overflow-y: auto;
        }

        .modern-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            font-size: 14px;
            background: white;
        }

        .modern-table thead {
            background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .modern-table th {
            padding: 16px 20px;
            text-align: left;
            font-weight: 600;
            color: #2d3748;
            border-bottom: 1px solid #e2e8f0;
            white-space: nowrap;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .modern-table th.sortable {
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
            position: relative;
        }

        .modern-table th.sortable:hover {
            background: linear-gradient(135deg, #edf2f7 0%, #e2e8f0 100%);
            color: #3182ce;
        }

        .th-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }

        .sort-icon {
            font-size: 10px;
            color: #a0aec0;
            transition: all 0.2s ease;
            opacity: 0;
        }

        .modern-table th.sortable:hover .sort-icon {
            opacity: 1;
        }

        .modern-table th.sort-asc .sort-icon,
        .modern-table th.sort-desc .sort-icon {
            color: #3182ce;
            opacity: 1;
        }

        .modern-table th.sort-asc .sort-icon {
            transform: rotate(0deg);
        }

        .modern-table th.sort-desc .sort-icon {
            transform: rotate(180deg);
        }

        .modern-table td {
            padding: 16px 20px;
            border-bottom: 1px solid #f7fafc;
            vertical-align: middle;
            color: #4a5568;
        }

        .modern-table tbody tr {
            transition: all 0.2s ease;
            background: white;
        }

        .modern-table tbody tr:hover {
            background: #f8fafc;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .modern-table tbody tr:nth-child(even) {
            background: #fafbfc;
        }

        .modern-table tbody tr:nth-child(even):hover {
            background: #f1f5f9;
        }

        /* 日志级别样式 */
        .log-level-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            min-width: 50px;
            justify-content: center;
        }

        .log-level-badge.info { background: linear-gradient(135deg, #3182ce, #63b3ed); color: white; }
        .log-level-badge.warn { background: linear-gradient(135deg, #ed8936, #f6ad55); color: white; }
        .log-level-badge.error { background: linear-gradient(135deg, #e53e3e, #f56565); color: white; }
        .log-level-badge.debug { background: linear-gradient(135deg, #805ad5, #b794f6); color: white; }
        .log-level-badge.success { background: linear-gradient(135deg, #38a169, #68d391); color: white; }

        .log-source-badge {
            display: inline-flex;
            align-items: center;
            padding: 2px 8px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 500;
            background: #f7fafc;
            color: #4a5568;
            border: 1px solid #e2e8f0;
        }

        .log-timestamp {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #718096;
            font-weight: 600;
        }

        .log-message-preview {
            max-width: 400px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: #2d3748;
            font-size: 13px;
        }

        .action-buttons {
            display: flex;
            gap: 6px;
        }

        .action-btn-small {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
        }

        .action-btn-small.view {
            background: #edf2f7;
            color: #4a5568;
        }

        .action-btn-small.view:hover {
            background: #3182ce;
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(49, 130, 206, 0.3);
        }

        .action-btn-small.export {
            background: #edf2f7;
            color: #4a5568;
        }

        .action-btn-small.export:hover {
            background: #38a169;
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(56, 161, 105, 0.3);
        }

        /* 响应式设计调整 */
        @media (max-width: 768px) {
            .toolbar-bottom {
                flex-direction: column;
                align-items: stretch;
                gap: 16px;
            }

            .search-section {
                max-width: none;
                order: 1;
            }

            .search-controls {
                position: static;
                transform: none;
                justify-content: center;
                order: 2;
            }

            .search-wrapper {
                max-width: none;
            }

            /* AI卡片响应式优化 */
            .insight-header {
                flex-direction: column;
                padding-right: 60px;
                gap: 12px;
            }

            .insight-title {
                margin-right: 0;
            }

            .insight-score {
                align-self: flex-start;
                margin-top: 0;
                min-width: 100px;
            }

            .insight-priority-badge {
                top: 12px;
                right: 12px;
                padding: 3px 8px;
                font-size: 9px;
            }
        }

        /* 保留原有的filter-panel样式以向后兼容 */
        .filter-panel {
            padding: 20px;
        }

        .filter-group {
            margin-bottom: 20px;
        }

        .filter-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #2d3748;
        }

        .filter-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .filter-input:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
            background: white;
        }

        .filter-select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            margin-bottom: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .filter-select:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
            background: white;
        }

        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .filter-tag {
            padding: 6px 12px;
            background: rgba(49, 130, 206, 0.1);
            color: #3182ce;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid rgba(49, 130, 206, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .filter-tag::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.3s ease;
        }

        .filter-tag:hover::before {
            left: 100%;
        }

        .filter-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.2);
        }

        .filter-tag.active {
            background: linear-gradient(135deg, #3182ce, #2c5282);
            color: white;
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.3);
            transform: translateY(-1px);
        }

        .filter-tag.active:hover {
            background: linear-gradient(135deg, #2c5282, #2a4b7c);
        }

        /* 自定义滚动条 */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        /* 控制面板样式调整 */
        .control-section {
            display: block;
            margin-bottom: 24px;
        }

        .panel-controls {
            display: flex;
            gap: 8px;
        }

        .control-btn {
            padding: 8px 16px;
            background: white;
            color: #4a5568;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .control-btn:hover {
            background: #f7fafc;
            border-color: #cbd5e0;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .control-btn.primary {
            background: #3182ce;
            color: white;
            border-color: #3182ce;
        }

        .control-btn.primary:hover {
            background: #2c5282;
            border-color: #2c5282;
        }
    </style>
</head>
<body>
    <nav class="top-navbar">
        <div class="logo">
            <i class="fas fa-shield-alt"></i>
            DDosSeek
        </div>
        <div class="user-section">
            <i class="fas fa-bell" style="cursor: pointer; color: #faad14;"></i>
            <div class="user-avatar">A</div>
            <span>管理员</span>
        </div>
    </nav>

    <aside class="sidebar">
        <ul class="sidebar-menu">
            <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i>系统仪表盘</a></li>
            <li><a href="network-monitor.html"><i class="fas fa-network-wired"></i>网络监测中心</a></li>
            <li><a href="ddos-detection.html"><i class="fas fa-shield-virus"></i>DDoS检测防护</a></li>
            <li><a href="firewall-management.html"><i class="fas fa-fire-extinguisher"></i>防火墙管理</a></li>
            <li><a href="log-center.html" class="active"><i class="fas fa-file-alt"></i>智能日志中心</a></li>
            <li><a href="deepseek-assistant.html"><i class="fas fa-robot"></i>DeepSeek AI助手</a></li>
            <li><a href="rule-config.html"><i class="fas fa-cogs"></i>规则配置中心</a></li>
            <li><a href="system-test.html"><i class="fas fa-vial"></i>系统测试平台</a></li>
        </ul>
    </aside>

    <main class="main-content">
        <!-- 面包屑导航 -->
        <nav class="breadcrumb" style="margin-bottom: 16px; font-size: 12px; color: #718096;">
            <span><i class="fas fa-home"></i> 首页</span>
            <span style="margin: 0 8px;">/</span>
            <span><a href="dashboard.html" style="color: #718096; text-decoration: none;">系统仪表盘</a></span>
            <span style="margin: 0 8px;">/</span>
            <span style="color: #3182ce; font-weight: 500;">智能日志中心</span>
        </nav>

        <div class="page-header">
            <div class="page-title">
                <i class="fas fa-file-alt"></i>
                智能日志中心
                <div class="log-status">实时采集</div>
            </div>
            <div class="action-controls">
                <button class="action-btn btn-success">
                    <i class="fas fa-play"></i> 开始采集
                </button>
                <button class="action-btn btn-warning">
                    <i class="fas fa-pause"></i> 暂停采集
                </button>
                <button class="action-btn btn-primary">
                    <i class="fas fa-download"></i> 导出日志
                </button>
                <button class="action-btn btn-danger">
                    <i class="fas fa-trash"></i> 清空日志
                </button>
            </div>
        </div>

        <section class="stats-section">
            <div class="stat-card glass-effect">
                <div class="stat-header">
                    <span class="stat-label">今日日志</span>
                    <div class="stat-icon" style="background: linear-gradient(135deg, #3182ce, #63b3ed);">
                        <i class="fas fa-file-text"></i>
                    </div>
                </div>
                <div class="stat-value-container">
                    <div class="stat-value" style="color: #3182ce;">24,567</div>
                    <div class="stat-change positive">+8.2%</div>
                </div>
                <div class="stat-bottom">
                    <div class="stat-subtitle">条记录</div>
                    <div class="stat-status">
                        <span class="status-dot active"></span>
                        <span>正常</span>
                    </div>
                </div>
                <div class="stat-mini-chart">
                    <div class="stat-mini-chart-fill" style="--fill-width: 78%; background: linear-gradient(90deg, #3182ce, #63b3ed);"></div>
                </div>
            </div>

            <div class="stat-card glass-effect">
                <div class="stat-header">
                    <span class="stat-label">错误日志</span>
                    <div class="stat-icon" style="background: linear-gradient(135deg, #e53e3e, #f56565);">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                </div>
                <div class="stat-value-container">
                    <div class="stat-value" style="color: #e53e3e;">156</div>
                    <div class="stat-change positive">+12%</div>
                </div>
                <div class="stat-bottom">
                    <div class="stat-subtitle">异常事件</div>
                    <div class="stat-status">
                        <span class="status-dot warning"></span>
                        <span>警告</span>
                    </div>
                </div>
                <div class="stat-mini-chart">
                    <div class="stat-mini-chart-fill" style="--fill-width: 32%; background: linear-gradient(90deg, #e53e3e, #f56565);"></div>
                </div>
            </div>

            <div class="stat-card glass-effect">
                <div class="stat-header">
                    <span class="stat-label">警告日志</span>
                    <div class="stat-icon" style="background: linear-gradient(135deg, #d69e2e, #f6ad55);">
                        <i class="fas fa-exclamation"></i>
                    </div>
                </div>
                <div class="stat-value-container">
                    <div class="stat-value" style="color: #d69e2e;">1,248</div>
                    <div class="stat-change neutral">-2.5%</div>
                </div>
                <div class="stat-bottom">
                    <div class="stat-subtitle">警告信息</div>
                    <div class="stat-status">
                        <span class="status-dot active"></span>
                        <span>稳定</span>
                    </div>
                </div>
                <div class="stat-mini-chart">
                    <div class="stat-mini-chart-fill" style="--fill-width: 52%; background: linear-gradient(90deg, #d69e2e, #f6ad55);"></div>
                </div>
            </div>

            <div class="stat-card glass-effect">
                <div class="stat-header">
                    <span class="stat-label">存储使用</span>
                    <div class="stat-icon" style="background: linear-gradient(135deg, #38a169, #68d391);">
                        <i class="fas fa-database"></i>
                    </div>
                </div>
                <div class="stat-value-container">
                    <div class="stat-value" style="color: #38a169;">2.8GB</div>
                    <div class="stat-change neutral">+0.3%</div>
                </div>
                <div class="stat-bottom">
                    <div class="stat-subtitle">已使用 64%</div>
                    <div class="stat-status">
                        <span class="status-dot active"></span>
                        <span>正常</span>
                    </div>
                </div>
                <div class="stat-mini-chart">
                    <div class="stat-mini-chart-fill" style="--fill-width: 64%; background: linear-gradient(90deg, #38a169, #68d391);"></div>
                </div>
            </div>

            <div class="stat-card glass-effect">
                <div class="stat-header">
                    <span class="stat-label">处理速度</span>
                    <div class="stat-icon" style="background: linear-gradient(135deg, #805ad5, #b794f6);">
                        <i class="fas fa-tachometer-alt"></i>
                    </div>
                </div>
                <div class="stat-value-container">
                    <div class="stat-value" style="color: #805ad5;">1,580</div>
                    <div class="stat-change negative">-5.2%</div>
                </div>
                <div class="stat-bottom">
                    <div class="stat-subtitle">条/分钟</div>
                    <div class="stat-status">
                        <span class="status-dot active"></span>
                        <span>高效</span>
                    </div>
                </div>
                <div class="stat-mini-chart">
                    <div class="stat-mini-chart-fill" style="--fill-width: 85%; background: linear-gradient(90deg, #805ad5, #b794f6);"></div>
                </div>
            </div>

            <div class="stat-card glass-effect">
                <div class="stat-header">
                    <span class="stat-label">实时连接</span>
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f6ad55, #ed8936);">
                        <i class="fas fa-plug"></i>
                    </div>
                </div>
                <div class="stat-value-container">
                    <div class="stat-value" style="color: #ed8936;">342</div>
                    <div class="stat-change positive">+15%</div>
                </div>
                <div class="stat-bottom">
                    <div class="stat-subtitle">活跃连接</div>
                    <div class="stat-status">
                        <span class="status-dot active"></span>
                        <span>在线</span>
                    </div>
                </div>
                <div class="stat-mini-chart">
                    <div class="stat-mini-chart-fill" style="--fill-width: 68%; background: linear-gradient(90deg, #f6ad55, #ed8936);"></div>
                </div>
            </div>
        </section>

        <!-- 现代化日志搜索和表格区域 -->
        <section class="control-section">
            <div class="glass-effect">
                <!-- YouTube/B站风格的工具栏 -->
                <div class="modern-toolbar">
                    <div class="toolbar-top">
                        <div class="toolbar-title">
                            <i class="fas fa-file-alt"></i>
                            日志记录详情
                        </div>
                        <div class="panel-controls">
                            <button class="control-btn" onclick="exportLogData()">
                                <i class="fas fa-download"></i> 导出
                            </button>
                            <button class="control-btn primary" onclick="refreshLogData()">
                                <i class="fas fa-sync"></i> 刷新
                            </button>
                        </div>
                    </div>

                    <div class="toolbar-bottom">
                        <div class="search-section">
                            <div class="search-wrapper">
                                <i class="fas fa-search search-icon-left"></i>
                                <input type="text" id="logSearch" class="modern-search-input" placeholder="搜索日志内容、级别、来源..." onkeydown="handleLogSearchKeydown(event)">
                                <div class="search-actions">
                                    <button class="clear-search-btn" onclick="clearLogSearch()" style="display: none;">
                                        <i class="fas fa-times"></i>
                                    </button>
                                    <button class="modern-search-btn" onclick="performLogSearch()">
                                        <i class="fas fa-search"></i> 搜索
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="search-controls">
                            <button class="filter-toggle-btn" onclick="toggleLogFilterPanel()" id="logFilterToggleBtn">
                                <i class="fas fa-sliders-h"></i>
                                高级筛选
                                <i class="fas fa-chevron-down filter-toggle-icon"></i>
                                <span class="filter-count-badge" id="logFilterCountBadge" style="display: none;">0</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 可折叠的筛选面板 -->
                    <div class="filter-chips-container" id="logFilterPanel">
                        <div class="filter-chip">
                            <i class="fas fa-flag"></i>
                            <select id="levelFilter">
                                <option value="">所有级别</option>
                                <option value="INFO">INFO</option>
                                <option value="WARN">WARN</option>
                                <option value="ERROR">ERROR</option>
                                <option value="DEBUG">DEBUG</option>
                                <option value="SUCCESS">SUCCESS</option>
                            </select>
                        </div>
                        
                        <div class="filter-chip">
                            <i class="fas fa-server"></i>
                            <select id="sourceFilter">
                                <option value="">所有来源</option>
                                <option value="firewall">防火墙系统</option>
                                <option value="ddos">DDoS检测引擎</option>
                                <option value="network">网络监控中心</option>
                                <option value="system">系统核心服务</option>
                                <option value="auth">用户认证服务</option>
                                <option value="database">数据库服务</option>
                                <option value="proxy">代理服务器</option>
                                <option value="vpn">VPN网关</option>
                                <option value="api">API接口</option>
                                <option value="security">安全审计系统</option>
                                <option value="cache">缓存服务</option>
                                <option value="mail">邮件服务</option>
                                <option value="backup">备份服务</option>
                                <option value="storage">存储系统</option>
                                <option value="web">Web服务器</option>
                                <option value="monitor">监控系统</option>
                                <option value="dns">DNS服务</option>
                                <option value="scheduler">任务调度器</option>
                                <option value="certificate">证书管理</option>
                            </select>
                        </div>
                        
                        <div class="filter-chip">
                            <i class="fas fa-clock"></i>
                            <select id="timeRangeFilter">
                                <option value="">所有时间</option>
                                <option value="5m">最近5分钟</option>
                                <option value="1h">最近1小时</option>
                                <option value="6h">最近6小时</option>
                                <option value="24h" selected>最近24小时</option>
                                <option value="7d">最近7天</option>
                            </select>
                        </div>
                    
                        <div class="action-buttons-group">
                            <button class="modern-btn primary" onclick="performLogSearch()">
                                <i class="fas fa-filter"></i> 应用筛选
                            </button>
                            <button class="modern-btn outline" onclick="resetLogFilters()">
                                <i class="fas fa-undo"></i> 重置
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 现代化统计卡片 -->
                <div class="stats-cards-container">
                    <div class="stats-cards">
                        <div class="stats-card total">
                            <div class="stats-icon"><i class="fas fa-file-text"></i></div>
                            <div class="stats-label">总日志数</div>
                            <div class="stats-value" id="totalLogs">24,567</div>
                        </div>
                        <div class="stats-card visible">
                            <div class="stats-icon"><i class="fas fa-eye"></i></div>
                            <div class="stats-label">当前显示</div>
                            <div class="stats-value" id="visibleLogs">24,567</div>
                        </div>
                        <div class="stats-card info">
                            <div class="stats-icon"><i class="fas fa-info-circle"></i></div>
                            <div class="stats-label">信息日志</div>
                            <div class="stats-value" id="infoLogs">18,456</div>
                        </div>
                        <div class="stats-card warning">
                            <div class="stats-icon"><i class="fas fa-exclamation-triangle"></i></div>
                            <div class="stats-label">警告日志</div>
                            <div class="stats-value" id="warningLogs">4,523</div>
                        </div>
                        <div class="stats-card error">
                            <div class="stats-icon"><i class="fas fa-times-circle"></i></div>
                            <div class="stats-label">错误日志</div>
                            <div class="stats-value" id="errorLogs">1,356</div>
                        </div>
                        <div class="stats-card debug">
                            <div class="stats-icon"><i class="fas fa-bug"></i></div>
                            <div class="stats-label">调试日志</div>
                            <div class="stats-value" id="debugLogs">232</div>
                        </div>
                    </div>
                </div>
                    
                <!-- 现代化表格 -->
                <div class="modern-table-container">
                    <div class="table-wrapper">
                        <table class="modern-table" id="logsTable">
                            <thead>
                                <tr>
                                    <th class="sortable" data-sort="timestamp">
                                        <div class="th-content">
                                            时间戳
                                            <i class="fas fa-sort sort-icon"></i>
                                        </div>
                                    </th>
                                    <th class="sortable" data-sort="level">
                                        <div class="th-content">
                                            级别
                                            <i class="fas fa-sort sort-icon"></i>
                                        </div>
                                    </th>
                                    <th class="sortable" data-sort="source">
                                        <div class="th-content">
                                            来源
                                            <i class="fas fa-sort sort-icon"></i>
                                        </div>
                                    </th>
                                    <th class="sortable" data-sort="message">
                                        <div class="th-content">
                                            日志内容
                                            <i class="fas fa-sort sort-icon"></i>
                                        </div>
                                    </th>
                                    <th class="sortable" data-sort="ip">
                                        <div class="th-content">
                                            IP地址
                                            <i class="fas fa-sort sort-icon"></i>
                                        </div>
                                    </th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="logsTableBody">
                                <!-- 动态生成内容 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section class="analysis-section">
            <div class="chart-panel glass-effect">
                <div class="panel-header">
                    <div class="panel-title">日志趋势分析</div>
                </div>
                <div id="logTrendChart" style="height: 200px; margin-bottom: 20px;"></div>
                <div id="logLevelChart" style="height: 200px;"></div>
            </div>

            <div class="ai-panel glass-effect">
                <div class="panel-header">
                    <div class="panel-title">
                        <i class="fas fa-brain"></i>
                        AI智能分析
                        <span class="ai-cards-counter">
                            <span id="aiCurrentCard">1</span> / <span id="aiTotalCards">6</span>
                        </span>
                    </div>
                    <div class="ai-navigation">
                        <button class="ai-nav-btn ai-prev-btn" onclick="previousAICard()" id="aiPrevBtn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="ai-nav-btn ai-next-btn" onclick="nextAICard()" id="aiNextBtn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                
                <div class="ai-carousel-container">
                    <div class="ai-carousel-wrapper" id="aiCarouselWrapper">
                        <div class="ai-insight-card critical active" data-card="1">
                            <div class="card-background-pattern"></div>
                            <div class="insight-priority-badge critical">
                                <i class="fas fa-fire"></i>
                                <span>紧急</span>
                            </div>
                            <div class="insight-header">
                                <div class="insight-title">
                                    <div class="insight-icon" style="background: linear-gradient(135deg, #e53e3e, #f56565);">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                    <div class="title-content">
                                        <h3>异常检测告警</h3>
                                        <p class="title-subtitle">安全威胁分析</p>
                                    </div>
                                </div>
                                <div class="insight-score score-critical">
                                    <div class="score-icon"><i class="fas fa-fire"></i></div>
                                    <div class="score-text">
                                        <span class="score-level">高危</span>
                                        <span class="score-value">9.2/10</span>
                                    </div>
                                </div>
                            </div>
                            <div class="insight-desc">
                                <div class="threat-details">
                                    <div class="threat-source">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span>攻击源：192.168.1.100 (北京市)</span>
                                    </div>
                                    <div class="threat-stats">
                                        <div class="stat-item">
                                            <span class="stat-label">尝试次数</span>
                                            <span class="stat-value">1,247</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-label">扫描端口</span>
                                            <span class="stat-value">856</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-label">持续时间</span>
                                            <span class="stat-value">30分钟</span>
                                        </div>
                                    </div>
                                </div>
                                <p class="threat-description">检测到来自该IP的异常访问模式，包括频繁的认证失败和端口扫描行为。建议立即采取防护措施。</p>
                            </div>
                            <div class="insight-meta">
                                <div class="meta-info">
                                    <span><i class="fas fa-clock"></i> 检测时间：2分钟前</span>
                                    <span><i class="fas fa-shield-alt"></i> 自动阻断：已启用</span>
                                </div>
                                <div class="confidence-container">
                                    <span>置信度:</span>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="--confidence-width: 98%;"></div>
                                    </div>
                                    <span class="confidence-value">98%</span>
                                </div>
                            </div>
                            <div class="insight-actions">
                                <button class="insight-btn btn-apply primary">
                                    <i class="fas fa-ban"></i> 立即阻断
                                </button>
                                <button class="insight-btn btn-details">
                                    <i class="fas fa-search"></i> 查看详情
                                </button>
                                <button class="insight-btn btn-dismiss">
                                    <i class="fas fa-times"></i> 忽略
                                </button>
                            </div>
                        </div>

                        <div class="ai-insight-card warning" data-card="2">
                            <div class="card-background-pattern"></div>
                            <div class="insight-priority-badge warning">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>警告</span>
                            </div>
                            <div class="insight-header">
                                <div class="insight-title">
                                    <div class="insight-icon" style="background: linear-gradient(135deg, #d69e2e, #f6ad55);">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="title-content">
                                        <h3>性能趋势预警</h3>
                                        <p class="title-subtitle">系统负载分析</p>
                                    </div>
                                </div>
                                <div class="insight-score score-warning">
                                    <div class="score-icon"><i class="fas fa-exclamation"></i></div>
                                    <div class="score-text">
                                        <span class="score-level">警告</span>
                                        <span class="score-value">7.5/10</span>
                                    </div>
                                </div>
                            </div>
                            <div class="insight-desc">
                                <div class="performance-metrics">
                                    <div class="metric-item">
                                        <div class="metric-label">错误率增长</div>
                                        <div class="metric-value danger">+32%</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-label">超时事件</div>
                                        <div class="metric-value danger">+156%</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-label">系统负载</div>
                                        <div class="metric-value warning">78.5%</div>
                                    </div>
                                </div>
                                <p class="performance-description">系统负载呈现异常上升趋势，可能存在性能瓶颈或资源不足问题。</p>
                            </div>
                            <div class="insight-meta">
                                <div class="meta-info">
                                    <span><i class="fas fa-database"></i> 预测基于：48小时历史数据</span>
                                    <span><i class="fas fa-chart-area"></i> 预测模型：ARIMA</span>
                                </div>
                                <div class="confidence-container">
                                    <span>置信度:</span>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="--confidence-width: 85%;"></div>
                                    </div>
                                    <span class="confidence-value">85%</span>
                                </div>
                            </div>
                            <div class="insight-actions">
                                <button class="insight-btn btn-apply primary">
                                    <i class="fas fa-server"></i> 扩容资源
                                </button>
                                <button class="insight-btn btn-details">
                                    <i class="fas fa-chart-bar"></i> 性能报告
                                </button>
                                <button class="insight-btn btn-dismiss">
                                    <i class="fas fa-clock"></i> 稍后处理
                                </button>
                            </div>
                        </div>

                        <div class="ai-insight-card info" data-card="3">
                            <div class="card-background-pattern"></div>
                            <div class="insight-priority-badge info">
                                <i class="fas fa-lightbulb"></i>
                                <span>建议</span>
                            </div>
                            <div class="insight-header">
                                <div class="insight-title">
                                    <div class="insight-icon" style="background: linear-gradient(135deg, #3182ce, #63b3ed);">
                                        <i class="fas fa-shield-alt"></i>
                                    </div>
                                    <div class="title-content">
                                        <h3>安全策略建议</h3>
                                        <p class="title-subtitle">防护优化方案</p>
                                    </div>
                                </div>
                                <div class="insight-score score-info">
                                    <div class="score-icon"><i class="fas fa-lightbulb"></i></div>
                                    <div class="score-text">
                                        <span class="score-level">建议</span>
                                        <span class="score-value">8.1/10</span>
                                    </div>
                                </div>
                            </div>
                            <div class="insight-desc">
                                <div class="security-analysis">
                                    <div class="analysis-item">
                                        <i class="fas fa-api"></i>
                                        <span>API接口保护力度不足</span>
                                    </div>
                                    <div class="analysis-item">
                                        <i class="fas fa-tachometer-alt"></i>
                                        <span>缺少智能频率限制机制</span>
                                    </div>
                                    <div class="analysis-item">
                                        <i class="fas fa-list"></i>
                                        <span>IP白名单需要优化</span>
                                    </div>
                                </div>
                                <p class="security-description">建议启用智能频率限制和IP白名单机制，有效减少恶意访问尝试和API滥用。</p>
                            </div>
                            <div class="insight-meta">
                                <div class="meta-info">
                                    <span><i class="fas fa-history"></i> 基于：7天安全事件分析</span>
                                    <span><i class="fas fa-robot"></i> AI模型：SecurityGuard v2.1</span>
                                </div>
                                <div class="confidence-container">
                                    <span>置信度:</span>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="--confidence-width: 92%;"></div>
                                    </div>
                                    <span class="confidence-value">92%</span>
                                </div>
                            </div>
                            <div class="insight-actions">
                                <button class="insight-btn btn-apply primary">
                                    <i class="fas fa-shield-check"></i> 启用策略
                                </button>
                                <button class="insight-btn btn-details">
                                    <i class="fas fa-file-alt"></i> 安全报告
                                </button>
                                <button class="insight-btn btn-dismiss">
                                    <i class="fas fa-pause"></i> 暂不执行
                                </button>
                            </div>
                        </div>

                        <div class="ai-insight-card warning" data-card="4">
                            <div class="card-background-pattern"></div>
                            <div class="insight-priority-badge warning">
                                <i class="fas fa-hdd"></i>
                                <span>容量</span>
                            </div>
                            <div class="insight-header">
                                <div class="insight-title">
                                    <div class="insight-icon" style="background: linear-gradient(135deg, #805ad5, #b794f6);">
                                        <i class="fas fa-database"></i>
                                    </div>
                                    <div class="title-content">
                                        <h3>存储容量优化</h3>
                                        <p class="title-subtitle">空间管理建议</p>
                                    </div>
                                </div>
                                <div class="insight-score score-warning">
                                    <div class="score-icon"><i class="fas fa-hdd"></i></div>
                                    <div class="score-text">
                                        <span class="score-level">警告</span>
                                        <span class="score-value">8.6/10</span>
                                    </div>
                                </div>
                            </div>
                            <div class="insight-desc">
                                <div class="storage-stats">
                                    <div class="storage-item">
                                        <div class="storage-label">当前使用率</div>
                                        <div class="storage-value">
                                            <div class="usage-bar">
                                                <div class="usage-fill" style="width: 86%"></div>
                                            </div>
                                            <span>86%</span>
                                        </div>
                                    </div>
                                    <div class="storage-item">
                                        <div class="storage-label">预计达到临界值</div>
                                        <div class="storage-value danger">72小时内</div>
                                    </div>
                                    <div class="storage-item">
                                        <div class="storage-label">存储增长率</div>
                                        <div class="storage-value">12GB/天</div>
                                    </div>
                                </div>
                                <p class="storage-description">建议启用自动归档策略并清理30天以上的日志数据。</p>
                            </div>
                            <div class="insight-meta">
                                <div class="meta-info">
                                    <span><i class="fas fa-chart-line"></i> 存储增长率：12GB/天</span>
                                    <span><i class="fas fa-archive"></i> 可清理数据：2.1TB</span>
                                </div>
                                <div class="confidence-container">
                                    <span>置信度:</span>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="--confidence-width: 96%;"></div>
                                    </div>
                                    <span class="confidence-value">96%</span>
                                </div>
                            </div>
                            <div class="insight-actions">
                                <button class="insight-btn btn-apply primary">
                                    <i class="fas fa-broom"></i> 清理归档
                                </button>
                                <button class="insight-btn btn-details">
                                    <i class="fas fa-chart-pie"></i> 存储详情
                                </button>
                                <button class="insight-btn btn-dismiss">
                                    <i class="fas fa-eye"></i> 监控状态
                                </button>
                            </div>
                        </div>

                        <div class="ai-insight-card success" data-card="5">
                            <div class="card-background-pattern"></div>
                            <div class="insight-priority-badge success">
                                <i class="fas fa-heart"></i>
                                <span>健康</span>
                            </div>
                            <div class="insight-header">
                                <div class="insight-title">
                                    <div class="insight-icon" style="background: linear-gradient(135deg, #38a169, #68d391);">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                    <div class="title-content">
                                        <h3>系统健康状态</h3>
                                        <p class="title-subtitle">整体运行评估</p>
                                    </div>
                                </div>
                                <div class="insight-score score-success">
                                    <div class="score-icon"><i class="fas fa-heart"></i></div>
                                    <div class="score-text">
                                        <span class="score-level">优秀</span>
                                        <span class="score-value">A+</span>
                                    </div>
                                </div>
                            </div>
                            <div class="insight-desc">
                                <div class="health-indicators">
                                    <div class="health-item">
                                        <div class="health-icon"><i class="fas fa-server"></i></div>
                                        <div class="health-info">
                                            <span class="health-label">核心服务</span>
                                            <span class="health-status success">正常运行</span>
                                        </div>
                                    </div>
                                    <div class="health-item">
                                        <div class="health-icon"><i class="fas fa-network-wired"></i></div>
                                        <div class="health-info">
                                            <span class="health-label">网络连接</span>
                                            <span class="health-status success">稳定</span>
                                        </div>
                                    </div>
                                    <div class="health-item">
                                        <div class="health-icon"><i class="fas fa-shield-virus"></i></div>
                                        <div class="health-info">
                                            <span class="health-label">防护系统</span>
                                            <span class="health-status success">功能完备</span>
                                        </div>
                                    </div>
                                </div>
                                <p class="health-description">系统整体健康度评分为A+，各项关键指标均在正常范围内。</p>
                            </div>
                            <div class="insight-meta">
                                <div class="meta-info">
                                    <span><i class="fas fa-sync-alt"></i> 最后检查：1分钟前</span>
                                    <span><i class="fas fa-chart-area"></i> 稳定运行：99.9%</span>
                                </div>
                                <div class="confidence-container">
                                    <span>健康度:</span>
                                    <div class="confidence-bar success">
                                        <div class="confidence-fill" style="--confidence-width: 100%;"></div>
                                    </div>
                                    <span class="confidence-value">100%</span>
                                </div>
                            </div>
                            <div class="insight-actions">
                                <button class="insight-btn btn-details primary">
                                    <i class="fas fa-file-medical-alt"></i> 健康报告
                                </button>
                                <button class="insight-btn btn-apply">
                                    <i class="fas fa-rocket"></i> 优化建议
                                </button>
                            </div>
                        </div>

                        <div class="ai-insight-card info" data-card="6">
                            <div class="card-background-pattern"></div>
                            <div class="insight-priority-badge info">
                                <i class="fas fa-chart-pie"></i>
                                <span>洞察</span>
                            </div>
                            <div class="insight-header">
                                <div class="insight-title">
                                    <div class="insight-icon" style="background: linear-gradient(135deg, #f6ad55, #ed8936);">
                                        <i class="fas fa-chart-pie"></i>
                                    </div>
                                    <div class="title-content">
                                        <h3>日志模式分析</h3>
                                        <p class="title-subtitle">智能行为识别</p>
                                    </div>
                                </div>
                                <div class="insight-score score-info">
                                    <div class="score-icon"><i class="fas fa-brain"></i></div>
                                    <div class="score-text">
                                        <span class="score-level">洞察</span>
                                        <span class="score-value">7.8/10</span>
                                    </div>
                                </div>
                            </div>
                            <div class="insight-desc">
                                <div class="pattern-analysis">
                                    <div class="pattern-item">
                                        <div class="pattern-time">
                                            <i class="fas fa-clock"></i>
                                            <span>周五 14:00-16:00</span>
                                        </div>
                                        <div class="pattern-stat">
                                            <span class="stat-label">错误率</span>
                                            <span class="stat-value danger">+25%</span>
                                        </div>
                                    </div>
                                    <div class="pattern-item">
                                        <div class="pattern-time">
                                            <i class="fas fa-users"></i>
                                            <span>访问高峰期</span>
                                        </div>
                                        <div class="pattern-stat">
                                            <span class="stat-label">并发数</span>
                                            <span class="stat-value">2,456</span>
                                        </div>
                                    </div>
                                </div>
                                <p class="pattern-description">机器学习算法发现访问高峰期的异常模式，建议在此时段增加监控频率。</p>
                            </div>
                            <div class="insight-meta">
                                <div class="meta-info">
                                    <span><i class="fas fa-database"></i> 分析样本：30天数据</span>
                                    <span><i class="fas fa-brain"></i> ML算法：XGBoost</span>
                                </div>
                                <div class="confidence-container">
                                    <span>准确性:</span>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="--confidence-width: 89%;"></div>
                                    </div>
                                    <span class="confidence-value">89%</span>
                                </div>
                            </div>
                            <div class="insight-actions">
                                <button class="insight-btn btn-apply primary">
                                    <i class="fas fa-cogs"></i> 调整策略
                                </button>
                                <button class="insight-btn btn-details">
                                    <i class="fas fa-chart-line"></i> 模式报告
                                </button>
                                <button class="insight-btn btn-dismiss">
                                    <i class="fas fa-bookmark"></i> 记录备忘
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 卡片指示器 -->
                <div class="ai-carousel-indicators">
                    <div class="indicator active" data-card="1"></div>
                    <div class="indicator" data-card="2"></div>
                    <div class="indicator" data-card="3"></div>
                    <div class="indicator" data-card="4"></div>
                    <div class="indicator" data-card="5"></div>
                    <div class="indicator" data-card="6"></div>
                </div>
            </div>
        </section>
    </main>

    <script>
        let autoScroll = true;
        let logContainer = document.getElementById('logContainer');

        // 日志趋势图表
        const logTrendChart = echarts.init(document.getElementById('logTrendChart'));
        const trendOption = {
            backgroundColor: 'transparent',
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                top: '10%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00'],
                axisLine: { lineStyle: { color: 'rgba(0,0,0,0.3)' }},
                axisLabel: { color: '#4a5568', fontSize: 10 }
            },
            yAxis: {
                type: 'value',
                axisLine: { lineStyle: { color: 'rgba(0,0,0,0.3)' }},
                axisLabel: { color: '#4a5568', fontSize: 10 },
                splitLine: { lineStyle: { color: 'rgba(0,0,0,0.1)' }}
            },
            series: [
                {
                    name: 'INFO',
                    type: 'line',
                    data: [1200, 1350, 1100, 1400, 1600, 1200, 1800, 1500, 1300],
                    smooth: true,
                    lineStyle: { color: '#3182ce', width: 2 },
                    areaStyle: { color: 'rgba(49,130,206,0.1)' }
                },
                {
                    name: 'WARN',
                    type: 'line',
                    data: [150, 200, 180, 250, 300, 180, 350, 280, 220],
                    smooth: true,
                    lineStyle: { color: '#d69e2e', width: 2 },
                    areaStyle: { color: 'rgba(214,158,46,0.1)' }
                },
                {
                    name: 'ERROR',
                    type: 'line',
                    data: [20, 35, 25, 45, 60, 30, 80, 55, 40],
                    smooth: true,
                    lineStyle: { color: '#e53e3e', width: 2 },
                    areaStyle: { color: 'rgba(229,62,62,0.1)' }
                }
            ]
        };
        logTrendChart.setOption(trendOption);

        // 日志级别分布图表
        const logLevelChart = echarts.init(document.getElementById('logLevelChart'));
        const levelOption = {
            backgroundColor: 'transparent',
            legend: {
                bottom: '5%',
                left: 'center',
                textStyle: { color: '#4a5568', fontSize: 10 }
            },
            series: [
                {
                    type: 'pie',
                    radius: ['40%', '70%'],
                    center: ['50%', '40%'],
                    data: [
                        { value: 18500, name: 'INFO', itemStyle: { color: '#3182ce' }},
                        { value: 4200, name: 'WARN', itemStyle: { color: '#d69e2e' }},
                        { value: 1200, name: 'ERROR', itemStyle: { color: '#e53e3e' }},
                        { value: 500, name: 'DEBUG', itemStyle: { color: '#805ad5' }},
                        { value: 167, name: 'SUCCESS', itemStyle: { color: '#38a169' }}
                    ],
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.3)'
                        }
                    },
                    label: {
                        color: '#4a5568',
                        fontSize: 10
                    }
                }
            ]
        };
        logLevelChart.setOption(levelOption);

        // 响应式图表调整
        window.addEventListener('resize', function() {
            logTrendChart.resize();
            logLevelChart.resize();
        });

        // 过滤标签切换
        document.querySelectorAll('.filter-tag').forEach(tag => {
            tag.addEventListener('click', function() {
                document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // 自动滚动控制
        function toggleAutoScroll() {
            autoScroll = !autoScroll;
            const btn = event.target.closest('.stream-btn');
            if (autoScroll) {
                btn.innerHTML = '<i class="fas fa-arrow-down"></i> 自动滚动';
                btn.className = 'stream-btn btn-success';
            } else {
                btn.innerHTML = '<i class="fas fa-pause"></i> 已暂停';
                btn.className = 'stream-btn btn-warning';
            }
        }

        // 清空日志
        function clearLogs() {
            if (confirm('确定要清空当前日志显示吗？')) {
                logContainer.innerHTML = '';
            }
        }

        // 生成随机日志条目
        function generateLogEntry() {
            const levels = ['info', 'warn', 'error', 'debug', 'success'];
            const levelClasses = ['level-info', 'level-warn', 'level-error', 'level-debug', 'level-success'];
            const sources = ['防火墙系统', 'DDoS检测引擎', '网络监控中心', '系统核心服务', '用户认证服务', '数据库服务', '代理服务器', 'VPN网关', 'API接口', '性能监控'];
            
            const detailedMessages = [
                {
                    level: 'info',
                    messages: [
                        '允许来自 192.168.{}.{} 的HTTPS连接请求 → 目标：web-server-0{}:443 | 用户：{} | 会话：sess_{}',
                        '负载均衡器状态更新 | 上游服务器：app-server-0{} | 状态：healthy | 健康检查通过：3/3 | 响应时间：{}ms',
                        '缓存命中率统计 | 命中率：{}% | 缓存大小：{}MB | 清理过期项：{} 个',
                        'SSL证书自动续期成功 | 域名：*.{}.com | 有效期：365天 | 签发机构：Let\'s Encrypt'
                    ]
                },
                {
                    level: 'warn',
                    messages: [
                        'API调用频率接近限制 | 客户端：mobile-app-v{} | IP：{} | 当前速率：{} req/min | 限制：1,000 req/min',
                        '磁盘空间使用率偏高 | 分区：/var/log | 使用率：{}% | 剩余空间：{}GB | 建议清理',
                        '数据库连接池压力增大 | 活跃连接：{}/50 | 等待队列：{} | 平均等待时间：{}ms',
                        '内存使用率持续上升 | 当前使用：{}% | 可用内存：{}GB | 建议优化或扩容'
                    ]
                },
                {
                    level: 'error',
                    messages: [
                        '数据库连接失败 | 主机：db-master-0{} | 错误：connection timeout | 重试次数：{}/5 | 预计恢复：{}s',
                        'VPN连接异常断开 | 用户：{} | 客户端IP：{} | 连接时长：{}h {}m | 错误代码：{}',
                        '认证服务响应超时 | 请求ID：{} | 用户：{} | 超时时间：{}ms | 影响用户：{} 人',
                        '文件系统错误 | 路径：/data/logs | 错误类型：disk full | 使用率：100% | 紧急清理中'
                    ]
                },
                {
                    level: 'success',
                    messages: [
                        '系统备份完成 | 备份类型：增量备份 | 数据量：{}GB | 耗时：{}m {}s | 压缩率：{}% | 目标：backup-nas-0{}',
                        '安全扫描完成 | 扫描对象：{} 个服务 | 发现漏洞：0 个 | 安全评分：A+ | 扫描时间：{}m',
                        '负载均衡调整完成 | 流量分配优化 | 响应时间改善：{}% | 吞吐量提升：{}% | 错误率降低：{}%',
                        '证书部署成功 | 服务：{} | 新证书有效期：365天 | 自动续期：已启用 | 影响域名：{} 个'
                    ]
                },
                {
                    level: 'debug',
                    messages: [
                        '系统资源监控 | CPU：{}% | 内存：{}% | 磁盘I/O：{} IOPS | 网络：{} Mbps | 进程：{}',
                        '缓存预热任务 | 预热项目：{} 个 | 完成率：{}% | 命中率提升：{}% | 预计完成：{}min',
                        '网络拓扑扫描 | 扫描范围：192.168.0.0/16 | 发现设备：{} 台 | 活跃主机：{} 台 | 响应时间：{}ms',
                        '算法优化测试 | 算法：机器学习模型v{} | 准确率：{}% | 处理速度提升：{}% | 内存优化：{}%'
                    ]
                }
            ];

            const level = levels[Math.floor(Math.random() * levels.length)];
            const levelClass = levelClasses[levels.indexOf(level)];
            const source = sources[Math.floor(Math.random() * sources.length)];
            
            const levelMessages = detailedMessages.find(l => l.level === level);
            const messageTemplate = levelMessages.messages[Math.floor(Math.random() * levelMessages.messages.length)];
            
            // 生成随机占位符替换
            const usernames = ['admin', 'john.doe', 'alice.smith', 'bob.wilson', 'mary.johnson', 'remote.worker'];
            const domains = ['example', 'company', 'secure', 'network'];
            const sessionId = Math.random().toString(36).substring(2, 10);
            
            const message = messageTemplate
                .replace(/{}/g, () => Math.floor(Math.random() * 200 + 10))
                .replace(/\{user\}/g, usernames[Math.floor(Math.random() * usernames.length)])
                .replace(/\{domain\}/g, domains[Math.floor(Math.random() * domains.length)])
                .replace(/\{session\}/g, sessionId);

            const timestamp = new Date().toLocaleTimeString('zh-CN', { 
                hour12: false, 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit' 
            }) + '.' + Math.floor(Math.random() * 1000).toString().padStart(3, '0');

            return {
                level,
                levelClass,
                source,
                message,
                timestamp,
                logClass: `log-${level}`
            };
        }

        // 添加新日志条目 (简化版 - 已移除依赖)
        // function addLogEntry() - 已禁用，因为依赖不存在的logContainer元素

        // 更新统计数据
        function updateStats() {
            const statValues = document.querySelectorAll('.stat-value');
            const statChanges = document.querySelectorAll('.stat-change');
            
            // 更新数值和变化趋势
            const newValues = [
                Math.floor(Math.random() * 5000 + 20000), // 今日日志
                Math.floor(Math.random() * 50 + 100),     // 错误日志
                Math.floor(Math.random() * 200 + 1000),   // 警告日志
                (Math.random() * 1.5 + 2.5).toFixed(1),  // 存储使用
                Math.floor(Math.random() * 500 + 1200),   // 处理速度
                Math.floor(Math.random() * 100 + 300)     // 实时连接
            ];
            
            const changes = [
                { value: (Math.random() * 15 + 2).toFixed(1), type: Math.random() > 0.3 ? 'positive' : 'negative' },
                { value: (Math.random() * 20 + 5).toFixed(1), type: Math.random() > 0.6 ? 'positive' : 'negative' },
                { value: (Math.random() * 10 + 1).toFixed(1), type: Math.random() > 0.5 ? 'neutral' : 'negative' },
                { value: (Math.random() * 2 + 0.1).toFixed(1), type: 'neutral' },
                { value: (Math.random() * 8 + 2).toFixed(1), type: Math.random() > 0.4 ? 'negative' : 'positive' },
                { value: (Math.random() * 25 + 5).toFixed(1), type: Math.random() > 0.5 ? 'positive' : 'negative' }
            ];
            
            statValues.forEach((stat, index) => {
                if (index < newValues.length) {
                    const value = newValues[index];
                    if (index === 3) {
                        stat.textContent = value + 'GB';
                    } else {
                        stat.textContent = typeof value === 'number' ? value.toLocaleString() : value;
                    }
                }
            });
            
            statChanges.forEach((change, index) => {
                if (index < changes.length) {
                    const changeData = changes[index];
                    change.className = `stat-change ${changeData.type}`;
                    const prefix = changeData.type === 'positive' ? '+' : changeData.type === 'negative' ? '-' : '';
                    change.innerHTML = `<i class="fas fa-${changeData.type === 'positive' ? 'arrow-up' : changeData.type === 'negative' ? 'arrow-down' : 'minus'}"></i> ${prefix}${changeData.value}%`;
                }
            });

            // 更新状态点
            const statusDots = document.querySelectorAll('.status-dot');
            statusDots.forEach((dot, index) => {
                const statuses = ['active', 'warning', 'danger'];
                const weights = [0.7, 0.2, 0.1]; // 70% active, 20% warning, 10% danger
                const random = Math.random();
                let selectedStatus = 'active';
                
                if (random < weights[2]) {
                    selectedStatus = 'danger';
                } else if (random < weights[1] + weights[2]) {
                    selectedStatus = 'warning';
                }
                
                dot.className = `status-dot ${selectedStatus}`;
            });

            // 更新图表数据 (安全版本)
            try {
                if (typeof logTrendChart !== 'undefined' && logTrendChart) {
                    const hours = ['10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'];
                    const newTrendData = [
                        Array.from({length: 9}, () => Math.floor(Math.random() * 800 + 800)),   // INFO
                        Array.from({length: 9}, () => Math.floor(Math.random() * 300 + 100)),   // WARN
                        Array.from({length: 9}, () => Math.floor(Math.random() * 100 + 20))     // ERROR
                    ];
                    
                    logTrendChart.setOption({
                        xAxis: { data: hours },
                        series: [
                            { data: newTrendData[0] },
                            { data: newTrendData[1] },
                            { data: newTrendData[2] }
                        ]
                    });
                }

                if (typeof logLevelChart !== 'undefined' && logLevelChart) {
                    const newPieData = [
                        { value: Math.floor(Math.random() * 5000 + 15000), name: 'INFO', itemStyle: { color: '#3182ce' }},
                        { value: Math.floor(Math.random() * 2000 + 3000), name: 'WARN', itemStyle: { color: '#d69e2e' }},
                        { value: Math.floor(Math.random() * 800 + 800), name: 'ERROR', itemStyle: { color: '#e53e3e' }}
                    ];
                    
                    logLevelChart.setOption({
                        series: [{ data: newPieData }]
                    });
                }
            } catch (error) {
                console.log('图表更新跳过（图表未初始化）');
            }
        }

        // ===== AI智能分析卡片横向切换功能 =====
        let currentAICard = 1;
        const totalAICards = 6;

        function updateAICardDisplay() {
            const wrapper = document.getElementById('aiCarouselWrapper');
            const currentCardEl = document.getElementById('aiCurrentCard');
            const totalCardsEl = document.getElementById('aiTotalCards');
            const prevBtn = document.getElementById('aiPrevBtn');
            const nextBtn = document.getElementById('aiNextBtn');
            
            if (wrapper) {
                const translateX = -(currentAICard - 1) * 100;
                wrapper.style.transform = `translateX(${translateX}%)`;
            }
            
            if (currentCardEl) currentCardEl.textContent = currentAICard;
            if (totalCardsEl) totalCardsEl.textContent = totalAICards;
            
            // 更新按钮状态
            if (prevBtn) prevBtn.disabled = currentAICard === 1;
            if (nextBtn) nextBtn.disabled = currentAICard === totalAICards;
            
            // 更新指示器
            const indicators = document.querySelectorAll('.ai-carousel-indicators .indicator');
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index + 1 === currentAICard);
            });
            
            // 更新卡片活跃状态
            const cards = document.querySelectorAll('.ai-insight-card');
            cards.forEach((card, index) => {
                card.classList.toggle('active', index + 1 === currentAICard);
            });
        }

        function nextAICard() {
            if (currentAICard < totalAICards) {
                currentAICard++;
                updateAICardDisplay();
                updateAIInsights(); // 更新动画效果
            }
        }

        function previousAICard() {
            if (currentAICard > 1) {
                currentAICard--;
                updateAICardDisplay();
                updateAIInsights(); // 更新动画效果
            }
        }

        function goToAICard(cardNumber) {
            if (cardNumber >= 1 && cardNumber <= totalAICards) {
                currentAICard = cardNumber;
                updateAICardDisplay();
                updateAIInsights(); // 更新动画效果
            }
        }

        // AI洞察更新 (增强版)
        function updateAIInsights() {
            const activeCard = document.querySelector('.ai-insight-card.active');
            if (activeCard) {
                const confidenceBars = activeCard.querySelectorAll('.confidence-fill');
                confidenceBars.forEach(bar => {
                    const newWidth = Math.floor(Math.random() * 30 + 70) + '%';
                    bar.style.setProperty('--confidence-width', newWidth);
                    
                    // 添加动画效果
                    bar.style.animation = 'none';
                    setTimeout(() => {
                        bar.style.animation = 'confidenceGrow 1.5s ease-out';
                    }, 100);
                });
                
                // 为威胁统计添加随机更新
                const threatStats = activeCard.querySelectorAll('.stat-value');
                threatStats.forEach(stat => {
                    if (!stat.classList.contains('danger') && !stat.classList.contains('warning')) {
                        const currentValue = parseInt(stat.textContent.replace(/[^\d]/g, ''));
                        if (currentValue > 0) {
                            const variation = Math.floor(Math.random() * 100 - 50); // -50 到 +50 的随机变化
                            const newValue = Math.max(1, currentValue + variation);
                            stat.textContent = newValue.toLocaleString();
                        }
                    }
                });
            }
        }

        // 键盘导航支持
        document.addEventListener('keydown', function(e) {
            if (e.target.closest('.ai-panel')) {
                if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    previousAICard();
                } else if (e.key === 'ArrowRight') {
                    e.preventDefault();
                    nextAICard();
                }
            }
        });

        // 触摸滑动支持
        let touchStartX = 0;
        let touchEndX = 0;
        
        function handleTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
        }
        
        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }
        
        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    // 向左滑动，显示下一张卡片
                    nextAICard();
                } else {
                    // 向右滑动，显示上一张卡片
                    previousAICard();
                }
            }
        }

        // 自动轮播功能（可选）
        let autoPlayInterval;
        
        function startAutoPlay() {
            autoPlayInterval = setInterval(() => {
                if (currentAICard < totalAICards) {
                    nextAICard();
                } else {
                    currentAICard = 0; // 重置到第一张
                    nextAICard();
                }
            }, 8000); // 8秒切换一次
        }
        
        function stopAutoPlay() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
                autoPlayInterval = null;
            }
        }

        // 简化的卡片交互效果
        function setupCardInteractions() {
            const statCards = document.querySelectorAll('.stat-card');
            if (statCards.length > 0) {
                statCards.forEach(card => {
                    card.addEventListener('click', function() {
                        // 添加点击动画
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);
                    });
                });
            }

            // AI卡片按钮交互
            const aiCards = document.querySelectorAll('.ai-insight-card');
            if (aiCards.length > 0) {
                aiCards.forEach(card => {
                    const buttons = card.querySelectorAll('.insight-btn');
                    buttons.forEach(btn => {
                        btn.addEventListener('click', function(e) {
                            e.stopPropagation();
                            const action = this.textContent.trim();
                            console.log(`执行操作：${action}`);
                            
                            // 添加按钮点击反馈
                            this.style.transform = 'scale(0.95)';
                            setTimeout(() => {
                                this.style.transform = '';
                            }, 150);
                        });
                    });
                });
            }

            // 指示器点击事件
            const indicators = document.querySelectorAll('.ai-carousel-indicators .indicator');
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', function() {
                    goToAICard(index + 1);
                });
            });

            // AI卡片触摸事件
            const aiPanel = document.querySelector('.ai-carousel-container');
            if (aiPanel) {
                aiPanel.addEventListener('touchstart', handleTouchStart, { passive: true });
                aiPanel.addEventListener('touchend', handleTouchEnd, { passive: true });
            }

            // 鼠标悬停时停止自动播放，离开时恢复
            const aiCarousel = document.querySelector('.ai-panel');
            if (aiCarousel) {
                aiCarousel.addEventListener('mouseenter', stopAutoPlay);
                aiCarousel.addEventListener('mouseleave', () => {
                    // 可选择是否启用自动播放
                    // startAutoPlay();
                });
            }
        }

        // 定时更新 (简化版)
        setInterval(updateStats, 8000);           // 统计数据更新

        // 简化初始化
        updateStats();
        setupCardInteractions();
        
        // 初始化AI卡片显示
        updateAICardDisplay();

        // 页面加载完成后的启动动画
        window.addEventListener('load', function() {
            const cards = document.querySelectorAll('.stat-card, .ai-insight');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.animation = 'slideIn 0.5s ease-out forwards';
                }, index * 100);
            });
        });

        // ===== 新增的现代化搜索和表格功能 =====
        
        // 日志数据管理系统
        let logsData = [
            {
                id: 1,
                timestamp: '14:35:22.123',
                level: 'INFO',
                source: 'firewall',
                sourceText: '防火墙系统',
                message: '允许来自 192.168.1.10:3425 的HTTPS连接请求 → 目标：web-server-01:443 | 用户：john.doe | 会话：sess_7a9b2c3d | 传输大小：2.3MB',
                ip: '192.168.1.10',
                date: new Date()
            },
            {
                id: 2,
                timestamp: '14:35:20.456',
                level: 'WARN',
                source: 'ddos',
                sourceText: 'DDoS检测引擎',
                message: '检测到来自 10.0.0.100 的异常流量模式 | 类型：TCP SYN Flood | 强度：1,250 pps | 威胁评分：7.2/10 | 自动防护：已启动 | 阻断时长：15min',
                ip: '10.0.0.100',
                date: new Date(Date.now() - 2000)
            },
            {
                id: 3,
                timestamp: '14:35:18.789',
                level: 'ERROR',
                source: 'database',
                sourceText: '数据库服务',
                message: '连接池耗尽：无法建立新的数据库连接 | 活跃连接：50/50 | 等待队列：15 | 重试次数：3/5 | 预计恢复时间：30s | 错误代码：CONNECTION_TIMEOUT',
                ip: '192.168.1.100',
                date: new Date(Date.now() - 4000)
            },
            {
                id: 4,
                timestamp: '14:35:16.012',
                level: 'SUCCESS',
                source: 'auth',
                sourceText: '用户认证服务',
                message: '管理员登录成功 | 用户：admin | IP：192.168.1.2 | 浏览器：Chrome 119.0 | 地理位置：北京市 | 多因子认证：已验证 | 权限级别：ROOT',
                ip: '192.168.1.2',
                date: new Date(Date.now() - 6000)
            },
            {
                id: 5,
                timestamp: '14:35:14.345',
                level: 'DEBUG',
                source: 'network',
                sourceText: '网络监控中心',
                message: '开始执行网络拓扑扫描任务 | 扫描范围：192.168.0.0/16 | 协议：ICMP+TCP | 超时：5s | 并发度：100 | 预计耗时：3min',
                ip: '192.168.1.1',
                date: new Date(Date.now() - 8000)
            },
            {
                id: 6,
                timestamp: '14:35:12.678',
                level: 'WARN',
                source: 'api',
                sourceText: 'API接口',
                message: 'API调用频率超限 | 客户端：mobile-app-v2.1.3 | IP：203.0.113.45 | 当前速率：1,200 req/min | 限制：1,000 req/min | 已触发限流 | 封禁时长：10min',
                ip: '203.0.113.45',
                date: new Date(Date.now() - 10000)
            },
            {
                id: 7,
                timestamp: '14:35:10.234',
                level: 'INFO',
                source: 'proxy',
                sourceText: '代理服务器',
                message: '负载均衡器状态更新 | 上游服务器：app-server-03 | 状态：healthy → unhealthy | 健康检查失败：3/3 | 已从负载池移除 | 剩余服务器：4台',
                ip: '192.168.2.10',
                date: new Date(Date.now() - 12000)
            },
            {
                id: 8,
                timestamp: '14:35:08.567',
                level: 'ERROR',
                source: 'vpn',
                sourceText: 'VPN网关',
                message: 'SSL VPN连接异常断开 | 用户：remote.worker | 客户端IP：58.87.106.12 | 连接时长：2h 15m | 传输数据：1.2GB | 错误代码：SSL_ERROR_HANDSHAKE_FAILURE',
                ip: '58.87.106.12',
                date: new Date(Date.now() - 14000)
            },
            {
                id: 9,
                timestamp: '14:35:06.890',
                level: 'SUCCESS',
                source: 'system',
                sourceText: '系统核心服务',
                message: '系统备份任务完成 | 备份类型：增量备份 | 数据量：2.8GB | 耗时：45m 12s | 压缩率：78% | 目标：backup-nas-02 | 状态：验证通过',
                ip: '192.168.1.50',
                date: new Date(Date.now() - 16000)
            },
            {
                id: 10,
                timestamp: '14:35:04.123',
                level: 'DEBUG',
                source: 'system',
                sourceText: '性能监控',
                message: '系统资源使用率统计 | CPU：45.2% | 内存：67.8% | 磁盘I/O：2,456 IOPS | 网络流量：125.6 Mbps | 活跃进程：247 | 负载平衡：正常',
                ip: '127.0.0.1',
                date: new Date(Date.now() - 18000)
            },
            {
                id: 11,
                timestamp: '14:35:02.456',
                level: 'WARN',
                source: 'security',
                sourceText: '安全审计系统',
                message: '检测到可疑的文件访问行为 | 用户：guest | 文件：/etc/passwd | 访问方式：非授权读取 | 来源IP：192.168.1.250 | 风险等级：中等',
                ip: '192.168.1.250',
                date: new Date(Date.now() - 20000)
            },
            {
                id: 12,
                timestamp: '14:35:00.789',
                level: 'INFO',
                source: 'cache',
                sourceText: '缓存服务',
                message: 'Redis缓存清理任务执行完成 | 清理过期键：1,245个 | 释放内存：45.6MB | 当前内存使用率：32.1% | 命中率：96.8%',
                ip: '192.168.1.200',
                date: new Date(Date.now() - 22000)
            },
            {
                id: 13,
                timestamp: '14:34:58.012',
                level: 'ERROR',
                source: 'mail',
                sourceText: '邮件服务',
                message: '邮件发送失败 | 收件人：admin@company.com | 主题：系统警报通知 | 错误：SMTP服务器连接超时 | 重试计划：5分钟后',
                ip: '192.168.1.210',
                date: new Date(Date.now() - 24000)
            },
            {
                id: 14,
                timestamp: '14:34:56.345',
                level: 'SUCCESS',
                source: 'backup',
                sourceText: '备份服务',
                message: '数据库备份任务成功完成 | 备份大小：1.8GB | 备份类型：完整备份 | 存储位置：/backup/db_20231201.sql | 验证状态：通过',
                ip: '192.168.1.220',
                date: new Date(Date.now() - 26000)
            },
            {
                id: 15,
                timestamp: '14:34:54.678',
                level: 'WARN',
                source: 'storage',
                sourceText: '存储系统',
                message: '磁盘空间使用率告警 | 分区：/var/log | 使用率：87.3% | 剩余空间：2.1GB | 建议：执行日志清理或扩容',
                ip: '192.168.1.230',
                date: new Date(Date.now() - 28000)
            },
            {
                id: 16,
                timestamp: '14:34:52.901',
                level: 'INFO',
                source: 'web',
                sourceText: 'Web服务器',
                message: 'Nginx配置重载完成 | 虚拟主机：5个 | SSL证书：全部有效 | 平均响应时间：125ms | 并发连接数：234',
                ip: '192.168.1.80',
                date: new Date(Date.now() - 30000)
            },
            {
                id: 17,
                timestamp: '14:34:50.234',
                level: 'DEBUG',
                source: 'monitor',
                sourceText: '监控系统',
                message: '系统健康检查完成 | 检查项目：18个 | 通过：16个 | 警告：2个 | 错误：0个 | 总体状态：良好',
                ip: '192.168.1.240',
                date: new Date(Date.now() - 32000)
            },
            {
                id: 18,
                timestamp: '14:34:48.567',
                level: 'ERROR',
                source: 'dns',
                sourceText: 'DNS服务',
                message: 'DNS解析失败 | 域名：internal.company.com | 查询类型：A记录 | 客户端：192.168.1.15 | 错误：NXDOMAIN | 重试状态：已重试',
                ip: '192.168.1.15',
                date: new Date(Date.now() - 34000)
            },
            {
                id: 19,
                timestamp: '14:34:46.890',
                level: 'SUCCESS',
                source: 'scheduler',
                sourceText: '任务调度器',
                message: '定时任务执行成功 | 任务名称：daily_report_generation | 执行时间：2.3秒 | 生成报告：3份 | 下次执行：明天14:30',
                ip: '192.168.1.250',
                date: new Date(Date.now() - 36000)
            },
            {
                id: 20,
                timestamp: '14:34:44.123',
                level: 'WARN',
                source: 'certificate',
                sourceText: '证书管理',
                message: 'SSL证书即将过期警告 | 域名：*.example.com | 过期时间：2023-12-15 | 剩余天数：14天 | 自动续期：已启用',
                ip: '192.168.1.260',
                date: new Date(Date.now() - 38000)
            }
        ];

        let filteredLogsData = [...logsData];
        let logSortColumn = '';
        let logSortDirection = 'asc';

        // ===== 日志搜索和筛选功能 =====
        function performLogSearch() {
            const searchTerm = document.getElementById('logSearch').value.toLowerCase();
            const levelFilter = document.getElementById('levelFilter').value;
            const sourceFilter = document.getElementById('sourceFilter').value;
            const timeRangeFilter = document.getElementById('timeRangeFilter').value;

            filteredLogsData = logsData.filter(log => {
                const matchesSearch = !searchTerm || 
                    log.message.toLowerCase().includes(searchTerm) ||
                    log.sourceText.toLowerCase().includes(searchTerm) ||
                    log.level.toLowerCase().includes(searchTerm) ||
                    log.ip.includes(searchTerm);

                const matchesLevel = !levelFilter || log.level === levelFilter;
                const matchesSource = !sourceFilter || log.source === sourceFilter;
                
                let matchesTime = true;
                if (timeRangeFilter) {
                    const now = new Date();
                    const logTime = log.date;
                    switch (timeRangeFilter) {
                        case '5m': matchesTime = (now - logTime) <= 5 * 60 * 1000; break;
                        case '1h': matchesTime = (now - logTime) <= 60 * 60 * 1000; break;
                        case '6h': matchesTime = (now - logTime) <= 6 * 60 * 60 * 1000; break;
                        case '24h': matchesTime = (now - logTime) <= 24 * 60 * 60 * 1000; break;
                        case '7d': matchesTime = (now - logTime) <= 7 * 24 * 60 * 60 * 1000; break;
                    }
                }

                return matchesSearch && matchesLevel && matchesSource && matchesTime;
            });

            const clearBtn = document.querySelector('.clear-search-btn');
            if (clearBtn) {
                clearBtn.style.display = searchTerm ? 'block' : 'none';
            }

            updateLogTable();
            updateLogSummary();
            updateLogFilterCountBadge();
        }

        function handleLogSearchKeydown(event) {
            if (event.key === 'Enter') {
                performLogSearch();
            }
        }

        // ===== 筛选面板切换功能 =====
        function toggleLogFilterPanel() {
            const panel = document.getElementById('logFilterPanel');
            const toggleBtn = document.getElementById('logFilterToggleBtn');
            
            if (panel && toggleBtn) {
                const isVisible = panel.classList.contains('show');
                
                if (isVisible) {
                    panel.classList.remove('show');
                    toggleBtn.classList.remove('active');
                } else {
                    panel.classList.add('show');
                    toggleBtn.classList.add('active');
                }
            }
        }

        function updateLogFilterCountBadge() {
            const searchTerm = document.getElementById('logSearch').value.trim();
            const levelFilter = document.getElementById('levelFilter').value;
            const sourceFilter = document.getElementById('sourceFilter').value;
            const timeRangeFilter = document.getElementById('timeRangeFilter').value;
            
            let activeFilters = 0;
            if (searchTerm) activeFilters++;
            if (levelFilter) activeFilters++;
            if (sourceFilter) activeFilters++;
            if (timeRangeFilter) activeFilters++;
            
            const badge = document.getElementById('logFilterCountBadge');
            if (badge) {
                if (activeFilters > 0) {
                    badge.style.display = 'flex';
                    badge.textContent = activeFilters;
                } else {
                    badge.style.display = 'none';
                }
            }
        }

        function clearLogSearch() {
            document.getElementById('logSearch').value = '';
            const clearBtn = document.querySelector('.clear-search-btn');
            if (clearBtn) clearBtn.style.display = 'none';
            performLogSearch();
        }

        function resetLogFilters() {
            document.getElementById('logSearch').value = '';
            document.getElementById('levelFilter').value = '';
            document.getElementById('sourceFilter').value = '';
            document.getElementById('timeRangeFilter').value = '';
            const clearBtn = document.querySelector('.clear-search-btn');
            if (clearBtn) clearBtn.style.display = 'none';
            
            // 重置后自动隐藏筛选面板
            const panel = document.getElementById('logFilterPanel');
            const toggleBtn = document.getElementById('logFilterToggleBtn');
            if (panel && toggleBtn) {
                panel.classList.remove('show');
                toggleBtn.classList.remove('active');
            }
            
            performLogSearch();
        }

        // ===== 排序功能 =====
        function sortLogTable(column) {
            const headers = document.querySelectorAll('.sortable');
            headers.forEach(header => {
                header.classList.remove('sort-asc', 'sort-desc');
            });

            if (logSortColumn === column) {
                logSortDirection = logSortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                logSortDirection = 'asc';
                logSortColumn = column;
            }

            const currentHeader = document.querySelector(`[data-sort="${column}"]`);
            if (currentHeader) {
                currentHeader.classList.add(`sort-${logSortDirection}`);
            }

            filteredLogsData.sort((a, b) => {
                let aVal = a[column];
                let bVal = b[column];

                if (column === 'timestamp') {
                    aVal = a.date;
                    bVal = b.date;
                } else if (typeof aVal === 'string') {
                    aVal = aVal.toLowerCase();
                    bVal = bVal.toLowerCase();
                }

                if (logSortDirection === 'asc') {
                    return aVal > bVal ? 1 : -1;
                } else {
                    return aVal < bVal ? 1 : -1;
                }
            });

            updateLogTable();
        }

        // ===== 更新表格内容 =====
        function updateLogTable() {
            console.log('开始更新表格内容...');
            const tbody = document.getElementById('logsTableBody');
            if (!tbody) {
                console.error('找不到表格tbody元素');
                return;
            }

            console.log('当前筛选后的数据条数：', filteredLogsData.length);
            
            tbody.innerHTML = filteredLogsData.map(log => {
                const levelClass = log.level.toLowerCase();
                
                return `
                    <tr>
                        <td><span class="log-timestamp">${log.timestamp}</span></td>
                        <td><span class="log-level-badge ${levelClass}">${log.level}</span></td>
                        <td><span class="log-source-badge">${log.sourceText}</span></td>
                        <td><span class="log-message-preview" title="${log.message}">${log.message.length > 80 ? log.message.substring(0, 80) + '...' : log.message}</span></td>
                        <td><span style="font-family: monospace; color: #4a5568;">${log.ip}</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn-small view" onclick="viewLogDetails(${log.id})" title="查看详情">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-btn-small export" onclick="exportSingleLog(${log.id})" title="导出">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
            
            console.log('表格内容已更新，渲染的行数：', tbody.children.length);
        }

        // ===== 更新统计信息 =====
        function updateLogSummary() {
            const total = logsData.length;
            const visible = filteredLogsData.length;
            const info = filteredLogsData.filter(log => log.level === 'INFO').length;
            const warning = filteredLogsData.filter(log => log.level === 'WARN').length;
            const error = filteredLogsData.filter(log => log.level === 'ERROR').length;
            const debug = filteredLogsData.filter(log => log.level === 'DEBUG').length;

            const totalLogsEl = document.getElementById('totalLogs');
            const visibleLogsEl = document.getElementById('visibleLogs');
            const infoLogsEl = document.getElementById('infoLogs');
            const warningLogsEl = document.getElementById('warningLogs');
            const errorLogsEl = document.getElementById('errorLogs');
            const debugLogsEl = document.getElementById('debugLogs');

            if (totalLogsEl) totalLogsEl.textContent = total.toLocaleString();
            if (visibleLogsEl) visibleLogsEl.textContent = visible.toLocaleString();
            if (infoLogsEl) infoLogsEl.textContent = info.toLocaleString();
            if (warningLogsEl) warningLogsEl.textContent = warning.toLocaleString();
            if (errorLogsEl) errorLogsEl.textContent = error.toLocaleString();
            if (debugLogsEl) debugLogsEl.textContent = debug.toLocaleString();
        }

        // ===== 日志详情查看 =====
        function viewLogDetails(logId) {
            const log = logsData.find(l => l.id === logId);
            if (!log) return;

            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.5); display: flex; align-items: center;
                justify-content: center; z-index: 10000;
            `;

            const content = document.createElement('div');
            content.style.cssText = `
                background: white; padding: 24px; border-radius: 12px;
                min-width: 600px; max-width: 800px; max-height: 80vh; overflow-y: auto;
                box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            `;

            const levelColors = {
                'INFO': '#3182ce',
                'WARN': '#ed8936',
                'ERROR': '#e53e3e',
                'DEBUG': '#805ad5',
                'SUCCESS': '#38a169'
            };

            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="margin: 0; color: #2d3748;">日志详细信息</h3>
                    <button onclick="this.parentNode.parentNode.parentNode.remove()" 
                            style="background: #f56565; color: white; border: none; 
                                   padding: 6px 12px; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; color: #718096; font-size: 12px; margin-bottom: 4px;">时间戳</label>
                        <div style="font-family: monospace; color: #2d3748; font-weight: 600;">${log.timestamp}</div>
                    </div>
                    <div>
                        <label style="display: block; color: #718096; font-size: 12px; margin-bottom: 4px;">日志级别</label>
                        <div style="font-weight: 600; color: ${levelColors[log.level] || '#2d3748'};">${log.level}</div>
                    </div>
                    <div>
                        <label style="display: block; color: #718096; font-size: 12px; margin-bottom: 4px;">日志来源</label>
                        <div style="font-weight: 600; color: #2d3748;">${log.sourceText}</div>
                    </div>
                    <div>
                        <label style="display: block; color: #718096; font-size: 12px; margin-bottom: 4px;">IP地址</label>
                        <div style="font-family: monospace; font-weight: 600; color: #2d3748;">${log.ip}</div>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #718096; font-size: 12px; margin-bottom: 8px;">完整日志内容</label>
                    <div style="padding: 16px; background: #f7fafc; border-radius: 8px; 
                                font-family: monospace; font-size: 13px; line-height: 1.5; 
                                color: #2d3748; white-space: pre-wrap; word-wrap: break-word;">
                        ${log.message}
                    </div>
                </div>
                
                <div style="display: flex; gap: 12px; justify-content: flex-end;">
                    <button onclick="exportSingleLog(${log.id})" 
                            style="background: #3182ce; color: white; border: none; 
                                   padding: 8px 16px; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-download"></i> 导出此日志
                    </button>
                    <button onclick="this.parentNode.parentNode.parentNode.remove()" 
                            style="background: #718096; color: white; border: none; 
                                   padding: 8px 16px; border-radius: 6px; cursor: pointer;">
                        关闭
                    </button>
                </div>
            `;

            modal.appendChild(content);
            document.body.appendChild(modal);

            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        function exportSingleLog(logId) {
            const log = logsData.find(l => l.id === logId);
            if (!log) return;
            
            const logText = `时间戳: ${log.timestamp}\n级别: ${log.level}\n来源: ${log.sourceText}\nIP地址: ${log.ip}\n内容: ${log.message}`;
            
            const blob = new Blob([logText], { type: 'text/plain;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `日志_${log.id}_${log.timestamp.replace(/[:.]/g, '-')}.txt`;
            link.click();
        }

        function exportLogData() {
            const csvContent = [
                ['时间戳', '级别', '来源', 'IP地址', '日志内容'],
                ...filteredLogsData.map(log => [
                    log.timestamp, log.level, log.sourceText, log.ip, log.message
                ])
            ].map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `日志记录_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        }

        function refreshLogData() {
            // 生成一些新的模拟日志
            const sources = ['firewall', 'ddos', 'network', 'system', 'auth', 'database', 'proxy', 'vpn', 'api'];
            const sourceTexts = ['防火墙系统', 'DDoS检测引擎', '网络监控中心', '系统核心服务', '用户认证服务', '数据库服务', '代理服务器', 'VPN网关', 'API接口'];
            const levels = ['INFO', 'WARN', 'ERROR', 'DEBUG', 'SUCCESS'];
            const messages = [
                '系统运行正常，各项指标稳定',
                '检测到异常流量，已启动防护机制',
                '数据库连接超时，正在重试',
                '用户登录成功，会话已建立',
                '网络延迟偏高，正在优化路由'
            ];
            
            for (let i = 0; i < 3; i++) {
                const randomSource = Math.floor(Math.random() * sources.length);
                const newLog = {
                    id: logsData.length + i + 1,
                    timestamp: new Date().toTimeString().split(' ')[0] + '.' + Math.floor(Math.random() * 1000).toString().padStart(3, '0'),
                    level: levels[Math.floor(Math.random() * levels.length)],
                    source: sources[randomSource],
                    sourceText: sourceTexts[randomSource],
                    message: messages[Math.floor(Math.random() * messages.length)],
                    ip: `192.168.1.${Math.floor(Math.random() * 255)}`,
                    date: new Date()
                };
                logsData.unshift(newLog);
            }
            
            // 保持最多100条日志
            if (logsData.length > 100) {
                logsData = logsData.slice(0, 100);
            }
            
            performLogSearch();
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 80px; right: 20px; background: #52c41a;
                color: white; padding: 12px 16px; border-radius: 8px; z-index: 10000;
                font-size: 13px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            notification.textContent = '日志数据已刷新';
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
            }, 2000);
        }

        // ===== 初始化函数 =====
        function initializeLogCenter() {
            console.log('开始初始化日志中心...');
            
            // 检查必要的DOM元素
            const logsTableBody = document.getElementById('logsTableBody');
            const totalLogsEl = document.getElementById('totalLogs');
            
            if (!logsTableBody) {
                console.error('找不到日志表格容器 #logsTableBody');
                return;
            }
            
            if (!totalLogsEl) {
                console.error('找不到统计元素 #totalLogs');
                return;
            }
            
            console.log('DOM元素检查通过');
            
            // 添加表头排序事件
            const sortableHeaders = document.querySelectorAll('#logsTable .sortable');
            console.log('找到排序表头数量：', sortableHeaders.length);
            
            sortableHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const column = this.getAttribute('data-sort');
                    console.log('点击排序列：', column);
                    sortLogTable(column);
                });
            });

            // 初始化表格，显示所有数据
            filteredLogsData = [...logsData];
            console.log('初始化数据条数：', filteredLogsData.length);
            
            updateLogTable();
            updateLogSummary();
            updateLogFilterCountBadge();
            
            // 验证表格是否正确渲染
            setTimeout(() => {
                const renderedRows = document.querySelectorAll('#logsTableBody tr');
                console.log('渲染的表格行数：', renderedRows.length);
                if (renderedRows.length === 0) {
                    console.error('表格渲染失败，尝试强制重新渲染...');
                    updateLogTable();
                }
            }, 100);
            
            console.log('日志中心初始化完成，数据条数：', logsData.length);
        }

        // ===== 初始化事件监听器 =====
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeLogCenter);
        } else {
            // 如果DOM已经加载完成，直接初始化
            initializeLogCenter();
        }
        
        // 确保页面标题正确设置
        document.title = 'DDosSeek - 智能日志中心';
        
        // 简单的导航处理（替代路由管理器功能）
        document.querySelectorAll('.sidebar-menu a').forEach(link => {
            link.addEventListener('click', (e) => {
                // 移除所有活跃状态
                document.querySelectorAll('.sidebar-menu a').forEach(l => l.classList.remove('active'));
                // 添加活跃状态到当前链接
                e.target.closest('a').classList.add('active');
            });
        });

        // 定时添加新日志
        setInterval(() => {
            const sources = ['firewall', 'ddos', 'network', 'system', 'auth'];
            const sourceTexts = ['防火墙系统', 'DDoS检测引擎', '网络监控中心', '系统核心服务', '用户认证服务'];
            const levels = ['INFO', 'WARN', 'ERROR', 'DEBUG'];
            const messages = [
                '系统运行正常，各项指标稳定',
                '检测到可疑活动，正在分析',
                '网络连接异常，已自动恢复',
                '性能优化完成，响应时间提升'
            ];
            
            const randomSource = Math.floor(Math.random() * sources.length);
            const newLog = {
                id: logsData.length + 1,
                timestamp: new Date().toTimeString().split(' ')[0] + '.' + Math.floor(Math.random() * 1000).toString().padStart(3, '0'),
                level: levels[Math.floor(Math.random() * levels.length)],
                source: sources[randomSource],
                sourceText: sourceTexts[randomSource],
                message: messages[Math.floor(Math.random() * messages.length)],
                ip: `192.168.1.${Math.floor(Math.random() * 255)}`,
                date: new Date()
            };
            
            logsData.unshift(newLog);
            
            // 保持最多100条日志
            if (logsData.length > 100) {
                logsData.pop();
            }
            
            // 如果当前没有过滤，更新显示
            const hasFilters = document.getElementById('logSearch').value.trim() || 
                             document.getElementById('levelFilter').value ||
                             document.getElementById('sourceFilter').value ||
                             document.getElementById('timeRangeFilter').value;
            
            if (!hasFilters) {
                filteredLogsData = [...logsData];
                updateLogTable();
                updateLogSummary();
            }
        }, 8000);

        // 不使用路由管理器，直接运行日志中心功能
        // const router = new DDosSeekRouter('log-center');
        
        // 强制再次初始化，确保表格数据正确显示
        setTimeout(() => {
            const tableBody = document.getElementById('logsTableBody');
            if (!tableBody || tableBody.children.length === 0) {
                console.log('检测到表格为空，执行强制初始化...');
                initializeLogCenter();
            }
        }, 100);

        // 最后的保障措施：页面完全加载后再次检查
        window.addEventListener('load', () => {
            setTimeout(() => {
                const tableBody = document.getElementById('logsTableBody');
                if (!tableBody || tableBody.children.length === 0) {
                    console.log('页面加载完成后发现表格仍为空，执行最终初始化...');
                    initializeLogCenter();
                }
                
                // 强制执行一次AI洞察更新
                try {
                    updateAIInsights();
                } catch (error) {
                    console.log('AI洞察更新跳过');
                }
            }, 500);
        });
    </script>
    <!-- <script src="router.js"></script> -->
</body>
</html> 